:root{
  /* Theme aligned with onboard/assets/styles/onboard.css */
  --bg: #050607;
  --panel: #0a0e0c;
  --panel2: #0a1410;
  --card: var(--panel2);

  --border: rgba(128, 255, 205, .22);
  --dash: rgba(128, 255, 205, .35);

  --brand: #00ffb2;
  --brand2: #7dffcf;

  /* Backwards-compat variable names used throughout the app */
  --neon: var(--brand);
  --neon2: var(--brand2);

  --text: rgba(244, 255, 250, .96);
  --muted: rgba(214, 255, 238, .86);
  --muted2: rgba(186, 255, 226, .78);
  --muted3: rgba(170, 255, 218, .64);
  --text-dim: var(--muted2);

  --good: #2ee59d;
  --warn: #ffd36a;
  --watch: var(--warn);
  --avoid: #ff4d6d;
  --shill: #e27419;

  --grid: rgba(0,255,178,.045);
  --accent: var(--neon);
  --accent2: var(--neon2);
  --danger: var(--avoid);
  --ok: var(--good);
  --ring: 1.2px;
  --glow: 20px;
  --edge: var(--border);
  --badge: var(--warn);
  --badge-border: color-mix(in srgb, var(--warn) 55%, transparent);

  --pad: 12px;
  --r-sm: 8px; --r: 12px; --r-lg: 16px; --r-xl: 22px;
  --shadow-1: 0 10px 24px rgba(0,0,0,.35);
  --shadow-2: 0 18px 55px rgba(0,0,0,.55);
  --shadow-3: 0 24px 70px rgba(0,0,0,.60);

  --step--1: clamp(.88rem, .82rem + .2vw, .95rem);
  --step-0: clamp(1rem, .94rem + .4vw, 1.1rem);
  --step-1: clamp(1.125rem, 1.04rem + .6vw, 1.25rem);
  --step-2: clamp(1.35rem, 1.16rem + 1vw, 1.6rem);
  --gap-1: clamp(6px, 1.2vw, 10px);
  --gap-2: clamp(8px, 2vw, 14px);
  --gap-3: clamp(12px, 2.6vw, 20px);
  --gap-4: clamp(16px, 3vw, 28px);
  --ring-strong: 0 0 0 .22rem color-mix(in oklab, var(--accent2) 58%, transparent);

  /* FDV UI vars (used by widgets/modals) */
  --fdv-bg: var(--bg);
  --fdv-surface: var(--panel);
  --fdv-border: var(--border);
  --fdv-fg: var(--text);
  --fdv-muted: var(--muted3);
  --fdv-accent: var(--brand);
  --fdv-ok: var(--good);
  --fdv-info: var(--brand);
  --fdv-help: var(--brand2);
  --fdv-warn: var(--warn);
  --fdv-err: #ff6b6b;
  --fdv-primary: var(--brand);
  --fdv-primary-fg: #03100b;
  --fdv-phantom: #8a63d2;
  --fdv-text: var(--text);
  --fdv-primary-700: var(--brand2);
  --fdv-danger: var(--avoid);
  --fdv-danger-700: color-mix(in srgb, var(--avoid) 80%, #000);
  --fdv-focus: rgba(0,255,178,0.22);
  --fdv-shadow: 0 18px 55px rgba(0,0,0,0.55);
}

html, body, input, select, textarea { color-scheme: dark; }

input, select, textarea, button{
  color: inherit;
  -webkit-text-fill-color: currentColor;
}

::placeholder{
  color: color-mix(in srgb, var(--muted3) 78%, transparent);
}

*{box-sizing:border-box}

html{ background: var(--bg); }

html,body{
  margin:0;
  color:var(--text);
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  background:
    radial-gradient(900px 650px at 18% -10%, rgba(0,255,178,.14), rgba(5,6,7,0) 60%),
    radial-gradient(1100px 700px at 85% 0%, rgba(125,255,207,.10), rgba(5,6,7,0) 55%),
    var(--bg);
}

#app {
  height: 100dvh;
  overflow: auto;
}

::-webkit-scrollbar {
  width: 12px;
  height: 12px;
  background: transparent; 
  display: none;
}

::-webkit-scrollbar-button {
  display: none;
  width: 0;
  height: 0;
}

::-webkit-scrollbar-track {
  border-radius: 10px;
  box-shadow: inset 0 0 0 1px rgba(0,255,178,.08);
} 

::-webkit-scrollbar-thumb {
  display: none;

}

::-webkit-scrollbar-thumb:hover {
  border-color: color-mix(in srgb, var(--accent2) 55%, #0b1118);
}

::-webkit-scrollbar-thumb:active {
  border-color: color-mix(in srgb, var(--accent2) 65%, #061119);
  box-shadow: 0 0 0 1px rgba(0,0,0,.5), inset 0 0 0 1px rgba(255,255,255,.05);
}

::-webkit-scrollbar-corner {
  background: #090c11;
  box-shadow: inset 0 0 0 1px rgba(123,241,255,.08);
  border-radius: 0 0 10px 0;
} 

::-webkit-scrollbar-button:hover {
  filter: brightness(1.15);
  border-color: rgba(123,241,255,.28);
  opacity: 1;
}

::-webkit-scrollbar-button:active {
  filter: brightness(1.3);
  border-color: rgba(123,241,255,.45);
}

::-webkit-scrollbar-button:disabled {
  opacity: .25;
  filter: grayscale(1);
} 

.scrollbar-compact {
  scrollbar-width: thin;
}
.scrollbar-compact::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
.scrollbar-compact::-webkit-scrollbar-thumb {
  border-radius: 8px;
} 

a{color:var(--neon2);text-decoration:none}
a:hover{text-decoration:none; filter:brightness(1.1)}

.sr-only {
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; 
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

.loading-messages {
    display: flex;
    justify-content: center;
    font-size: xx-small;
}

.loader-overlay[hidden] { display: grid; }
.loader-overlay {
  position: fixed; inset: 0; z-index: 9999;
  display: grid; place-items: center;
  /* Fallback color before color-mix for older Safari */
  background: rgba(11,17,29,.85);
  background: color-mix(in srgb, var(--bg, #0b111d) 85%, transparent);

  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}

.loader-wrap {
  display: grid; place-items: center; gap: 14px;
  padding: 18px 22px; border-radius: 16px;
  background: var(--card, #0f1729);
  box-shadow: 0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px rgba(122,222,255,.1);
}

.quick-spinner-wrap { display:flex; padding:14px; }
.quick-spinner {
  width:20px; height:20px; border:3px solid rgba(255,255,255,0.25);
  border-top-color:#09f; border-radius:50%; animation:addonSpin .8s linear infinite;
}
@keyframes addonSpin { to { transform:rotate(360deg); } }
.quick-loading-msg { font-size:11px; opacity:.7; margin-left:10px; white-space:nowrap; }

.spinner { width: 20px; height: 56px; display: block; }
.spinner .ring {
  fill: none;
  stroke: rgba(122,222,255,.15);
  stroke-width: 6;
}
.spinner .arc {
  fill: none;
  stroke: var(--neon, #7bd7ff);
  stroke-width: 6;
  stroke-linecap: round;
  stroke-dasharray: 110;
  stroke-dashoffset: 80;
  transform-origin: 50% 50%;
  animation: spin 1s linear infinite, dash 1.5s ease-in-out infinite;
}

.spinner[hidden] { display: none; }

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes dash {
  0%   { stroke-dashoffset: 100; }
  50%  { stroke-dashoffset: 40;  }
  100% { stroke-dashoffset: 100; }
}

/* === Hold bot UI (no inline CSS in scripts) === */

.fdv-hold-tabs{
  display:flex;
  gap:8px;
  margin:8px 0;
  overflow:auto;
}

.fdv-tab-btn[data-hold-tab]{
  position:relative;
  padding-right:26px;
}

.fdv-hold-tab-del{
  position:absolute;
  top:4px;
  right:6px;
  opacity:.7;
  line-height:1;
  font-size:14px;
}

.fdv-hold-panel{ display:none; }
.fdv-hold-panel.active{ display:block; }

.fdv-hold-rug-end-good{ color: var(--good); }
.fdv-hold-rug-end-avoid{ color: var(--avoid); }

.fdv-hold-rug-tier-low{ color: var(--good); }
.fdv-hold-rug-tier-medium{ color: var(--watch); }
.fdv-hold-rug-tier-high{ color: var(--fdv-warn); }
.fdv-hold-rug-tier-extreme{ color: var(--avoid); }

.fdv-hold-actions{ margin-top:6px; }
.fdv-hold-actions-left{ display:flex; flex-direction:row; gap:4px; align-items:center; }
.fdv-hold-toggle{ display:flex; flex-direction:row; align-items:center; gap:4px; }

.fdv-hold-edge{
  margin-top:6px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  align-items:center;
  font-size:12px;
}

.fdv-hold-edge-item{ color: var(--muted); }
.fdv-hold-edge-value{ font-weight:900; color: var(--text); }
.fdv-hold-edge-value-muted{ color: var(--muted); }
.fdv-hold-edge-hint{ flex:1 1 260px; min-width:200px; color: var(--muted); }

.fdv-hold-edge-hint-warn{ color: var(--fdv-warn); }
.fdv-hold-edge-hint-ok{ color: var(--muted); }

.fdv-hold-edge-rec-warn{ color: var(--fdv-warn) !important; }
.fdv-hold-edge-rec-ok{ color: var(--good) !important; }
.fdv-hold-edge-rec-muted{ color: var(--muted) !important; }

.fdv-edge-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:3px 8px;
  border-radius:999px;
  font-weight:900;
  letter-spacing:.6px;
  font-size:11px;
  line-height:1;
  border:1px solid rgba(122,222,255,.18);
  background:rgba(0,0,0,.22);
  color:var(--muted);
}
.fdv-edge-badge.ok{ border-color:rgba(72,255,176,.35); color:var(--good); }
.fdv-edge-badge.warn{ border-color:rgba(255,122,122,.45); color:var(--fdv-warn); animation:fdv-edge-pop 1.2s ease-in-out infinite; }
.fdv-edge-badge.idle{ opacity:.9; }

@keyframes fdv-edge-pop{
  0%,100%{ transform:scale(1); filter:drop-shadow(0 0 0 rgba(255,122,122,0)); }
  50%{ transform:scale(1.06); filter:drop-shadow(0 0 10px rgba(255,122,122,.45)); }
}

.fdv-hold-dextools-details{ margin-top:10px; }
.fdv-hold-dextools-summary-row{
  cursor:pointer;
  user-select:none;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:8px 10px;
  border:1px solid rgba(122,222,255,.14);
  border-radius:10px;
  background:rgba(0,0,0,.18);
}
.fdv-hold-dextools-title{ font-weight:800; letter-spacing:.2px; color:var(--text); }
.fdv-hold-dextools-summary{ font-size:12px; color:var(--muted); }
.fdv-hold-dextools-body{ margin-top:8px; }

.fdv-hold-chat{
  margin-top:12px;
  padding-top:10px;
  border-top:1px solid rgba(122,222,255,.14);
}
.fdv-hold-chat-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:8px;
  gap:10px;
}
.fdv-hold-chat-title{ font-weight:800; letter-spacing:.2px; color:var(--text); }
.fdv-hold-chat-right{ display:flex; align-items:center; gap:8px; }
.fdv-hold-chat-meta{ font-size:12px; color:var(--muted); }
.fdv-hold-chat-refresh{
  height:22px;
  width:22px;
  padding:0;
  border-radius:8px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border: none;
  background:rgba(0,0,0,.15);
  color:var(--muted);
  cursor:pointer;
}
.fdv-hold-chat-refresh:hover{ filter:brightness(1.12); }

@media (prefers-reduced-motion: reduce) {
  .spinner .arc { animation: none; }
}

#metaBase {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
}

#metaBase span {
  margin-left: 5px;
  font-size: 1rem;
}

#stimeDerived {
  text-align: center;
  font-weight: 600;
  font-size: 0.6em;
  padding: 5px;
}

.header{
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  z-index:5;
}

.superFeat {
  display: flex; align-items:center; gap:8px; padding:6px 0; justify-content: space-between;
}

.container{max-width:1200px;margin:0 auto;padding:30px}

@media (max-width: 500px) {
  .container{padding:15px}  
}

h1{margin:6px 0 2px 0; font-weight:600; letter-spacing:.5px}

.sub{color:var(--muted); font-size:.8rem}

.controls{
  display:flex; 
  gap:10px; 
  justify-content:space-between; 
  margin:12px 0 6px 0; flex-wrap:wrap;
  align-items: stretch;
}

.controls select{
  min-width:0; 
}

.innerControls{
  display:flex; flex-direction:row; gap:8px;
  flex:0 0 auto;
}
.innerControls .btn{
  flex:1 1 auto; min-width:0;
  padding: 12px 14px;
  font-size: clamp(.9rem, .85rem + .3vw, 1rem);
  min-height: 40px;
}

.hdr-tools {
  display: block;
  width: 100%;
  border-top: 1px solid rgba(255,255,255,.08);
  border-bottom: 1px solid rgba(255,255,255,.06);
  padding: 6px 0 8px;
  overflow-x: scroll;
}
.hdr-tools .tools-row { display:flex; align-items:center; gap:8px; padding:10px 8px; margin-bottom:15px; overflow: scroll; }
.hdr-tools .panel-row {     
  display: flex;
  padding: 6px 8px 0;
  flex-direction: column;
  justify-content: center;
  align-items: center; }

@media (max-width: 560px){
  .controls { gap: 8px; }
  .controls .search-wrap{ flex: 1 1 100%; }
}

@media (max-width: 540px){
  .controls{
    display: grid;
    grid-template-columns: 1fr;
    row-gap: 8px;
  }
  .controls select{ width:100%; }
  .innerControls{
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }
  .innerControls .btn{ width:100%; }
  .hdr-tools button {
    padding: 8px 10px;
    font-size: clamp(.85rem, .8rem + .3vw, .95rem);
    min-height: 36px;
  }
}

@media (max-width: 360px){
  .innerControls{ grid-template-columns: 1fr; }
}

/* Button in tools strip */
.addon-wrap { display:inline-flex; align-items:center; position:relative; }
.addon-btn {
  display:inline-flex; align-items:center; gap:8px;
  cursor:pointer; height:36px; padding:0 12px; border-radius:10px;
  border:1px solid var(--fdv-border, var(--border-2, rgba(255,255,255,.14)));
  background: transparent;
  color: var(--text);
  font-weight:600;
  transition: border-color .15s ease, filter .15s ease, background .15s ease;
  -webkit-tap-highlight-color: transparent;
}
.addon-btn:hover {
  border-color: rgba(26,255,213,.45);
  filter: brightness(1.06);
}
@keyframes addonBtnPulse {
  0%   { box-shadow: 0 0 0 0 rgba(26,255,213,.55); transform: translateZ(0) scale(1); }
  45%  { box-shadow: 0 0 0 6px rgba(26,255,213,.0); transform: translateZ(0) scale(1.04); }
  100% { box-shadow: 0 0 0 10px rgba(26,255,213,.0); transform: translateZ(0) scale(1); }
}
.addon-btn--notify {
  animation: addonBtnPulse .9s ease-out forwards;
}

/* Panel and list */
.addon-panel {
  position: static;
  display:none;
  width:100%;
  color:inherit;
  padding:8px;
  max-height: 60vh;
  overflow:auto;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

.addon-panel.show { display:block; }

.addon-head {
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  padding:4px 6px 8px;
}
.addon-head .title { font-weight:700; letter-spacing:.2px; }

.addon-list { display:grid; gap:6px; margin:0; padding:0; list-style:none; }

/* Item layout â€” card-like, vertical on mobile; horizontal on desktop */
.addon-item {
  border-radius:12px;
  overflow:hidden;
}
.addon-item > .quick-spinner-wrap {
  background: var(--card, linear-gradient(180deg, rgba(14,16,27,.95), rgba(0,0,0,.80)));
  border:1px solid rgba(122,222,255,.12);
  border-radius:12px;
  box-shadow: 0 0px 1px rgba(0, 0, 0, 0.18), 0 8px 22px rgba(0, 0, 0, 0.28);
}
.addon-item > a {
  position: relative;
  display:flex;
  flex-direction: column;
  width:100%;
  text-decoration:none;
  color: inherit;
  background: var(--card, linear-gradient(180deg, rgba(14,16,27,.95), rgba(0,0,0,.80)));
  border:1px solid rgba(122,222,255,.12);
  border-radius:12px;
  box-shadow: 0 0px 1px rgba(0, 0, 0, 0.18), 0 8px 22px rgba(0, 0, 0, 0.28);
  transition: transform .12s ease, filter .12s ease, border-color .12s ease, background .12s ease;
  -webkit-tap-highlight-color: transparent;
}

.addon-hold-wrap{
  position:absolute;
  top:6px;
  right:6px;
  z-index:3;
  display:flex;
  align-items:center;
  justify-content:flex-end;
  transition: transform .14s ease, opacity .14s ease, filter .14s ease;
  opacity:.96;
}
.addon-item > a:hover .addon-hold-wrap{ opacity:1; transform: translateY(-1px); filter: brightness(1.04); }

.addon-hold-btn{
  height:24px;
  font-size:11px;
  line-height: 22px;
  border-radius: 0 !important;
  border: none !important;
  background: rgba(123,241,255,.06);
}

.addon-hold-btn.holdCoin:hover{ transform: translateY(-1px) scale(1.02); }
.addon-hold-btn.holdCoin:active{ transform: translateY(0) scale(.99); }
.addon-item > a:hover {
  filter: brightness(1.04);
  border-color: rgba(26,255,213,.28);
  background: var(--card, linear-gradient(180deg, rgba(14,16,27,.98), rgba(0,0,0,.86)));
}
.addon-item > a:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 3px rgba(26,255,213,.14),
    inset 0 0 0 1px rgba(26,255,213,.24);
  border-color: rgba(26,255,213,.45);
}

/* Featured image (token logo) + rank */
.addon-avatar {
  position: relative;
  width: 100%;
  height: 160px;
  flex: 0 0 auto;
}
.addon-logo {
  width:100%;
  height:100%;
  border-radius: 12px 12px 0 0;
  object-fit: cover;
  background: #0b111d;
  display:block;
  border: none;
}
.addon-rank {
  width:20px; height:20px; border-radius:6px;
  display:flex; align-items:center; justify-content:center;
  font-size:11px; font-weight:800; color:#0b0b0c; position:absolute; top:10px; left:10px; z-index:1;
  box-shadow: 0 6px 14px rgba(0,0,0,.35);
}
.addon-rank.r1 { background: linear-gradient(135deg,#ffd776,#ffc24a); }
.addon-rank.r2 { background: linear-gradient(135deg,#d9e3ff,#a9c4ff); }
.addon-rank.r3 { background: linear-gradient(135deg,#ffd9c1,#ffb08c); }

/* Main text */
.addon-main { min-width:0; display:flex; flex-direction:column; gap:8px; padding:12px 12px 10px; }
.addon-line1 { display:flex; align-items:center; gap:8px; min-width:0; }
.addon-sym { font-weight:800; font-size: .98rem; letter-spacing:.2px; }
.addon-name { opacity:.9; font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; color: var(--muted); }

.addon-line2 {
  display:flex; align-items:center; gap:8px; flex-wrap:wrap;
  font-size:12px; opacity:.96;
}

.addon-right {
  margin-top: 6px;
  padding: 0 12px 12px;
  display:flex;
  align-items:center;
  justify-content:flex-end;
}

/* Non-desktop: make the logo a small corner thumbnail (bottom-right) */
@media (max-width: 768px) {
  .addon-item > a { position: relative; }

  .addon-avatar {
    position: absolute;
    right: 10px;
    bottom: 10px;
    width: 56px;
    height: 56px;
    pointer-events: none;
  }
  .addon-logo {
    border-radius: 14px;
    border: 1px solid rgba(122,222,255,.20);
  }
  .addon-rank {
    top: -6px;
    left: -6px;
  }

  /* reserve space so spark/buttons don't sit under the thumbnail */
  .addon-main,
  .addon-right {
    padding-right: 86px;
  }
}

@media only screen and (min-width: 769px) {
  .addon-item > a {
    flex-direction: row;
    align-items: stretch;
  }
  .addon-avatar {
    width: 180px;
    height: 140px;
  }
  .addon-logo {
    border-radius: 12px 0 0 12px;
  }
  .addon-main {
    padding: 12px;
    flex: 1 1 auto;
  }
  .addon-right {
    margin-top: 0;
    padding: 12px 12px 12px 0;
    flex: 0 0 auto;
    align-items: center;
  }
}

@media (max-width: 1024px) {
  .addon-right { flex-basis: 96px; }
  .micro .spark { height: 20px; }
}
@media (max-width: 768px) {
  .addon-right { flex-basis: 80px; }
  .micro .spark { height: 18px; }
  .addon-item .addon-line2 { font-size: 11px; gap: 8px; }
}

@media (max-width: 480px) {
  .addon-right {
    order: 3;               
    flex: 1 1 100%;
    justify-content: flex-start;
    margin-top: 6px;
  }
  .micro .spark { height: 16px; }
  .addon-item .mint-data { font-size: 4px; } 
}

.pill {
  display:inline-flex; align-items:center; gap:6px;
  padding:8px 8px; border-radius:999px;
  background: rgba(0, 0, 0, 0.1);
  border:1px solid rgba(122,222,255,.14);
  color: inherit;
  white-space: nowrap;
}
.pill .k{ opacity:.78; margin-right:2px; font-size:.88em; }
.pill .highlight{ font-weight:800; letter-spacing:.2px; }
.ch-pos { color:#19c37d; }
.ch-neg { color:#ff6f6f; }

.addon-line2 a.pill {
  text-decoration:none;
  border-color: rgba(122,222,255,.22);
  background: rgba(123,241,255,.06);
  color: var(--muted);
  transition: filter .12s ease, border-color .12s ease;
}
.addon-line2 a.pill:hover { filter: brightness(1.12); border-color: rgba(26,255,213,.35); }

@media (max-width: 720px){
  .addon-main { padding:10px 10px 8px; }
  .addon-rank { width:16px; height:16px; font-size:10px; top:8px; left:8px; }
  .addon-sym { font-size: .95rem; }
  .addon-line2 { gap:6px; }
  .pill { padding:2px 7px; }
}
@media (max-width: 420px){
  .addon-main { padding:8px 8px 6px; }
  .addon-line2 { font-size:11px; }
  .pill { padding:2px 6px; }
  .addon-name { display:none; } /* keep it ultra-compact on tiny screens */
}

@media (hover: none) and (pointer: coarse){
  .addon-item > a { min-height: 44px; }
}

select, input{
  background:var(--card); border:1px solid rgba(122,222,255,.2);
  font-weight: 600; color:var(--text); padding:8px 10px; border-radius:10px;
  outline:none; transition: .2s border;
}
select:focus, input:focus{border-color: var(--neon)}

.relaxControl{
  display: none;
}

input[type="checkbox"]{
  -webkit-appearance:none;
  appearance:none;
  width:16px; height:16px; cursor:pointer;
  border-radius:6px;
  border:1px solid rgba(122,222,255,.22);
  background:
    radial-gradient(60% 60% at 30% 20%, rgba(26,255,213,.08), transparent),
    var(--card);
  box-shadow: inset 0 0 0 1px rgba(26,255,213,.06);
  transition: border-color .15s ease, box-shadow .15s ease, filter .15s ease, background .15s ease;
  position:relative;
}

input[type="checkbox"]:hover{
  border-color: rgba(26,255,213,.45);
  filter: brightness(1.05);
}

input[type="checkbox"]:focus-visible{
  outline:none;
  box-shadow:
    0 0 0 3px rgba(26,255,213,.18),
    inset 0 0 0 1px rgba(26,255,213,.18);
}

input[type="checkbox"]:checked{
  border-color: rgba(26,255,213,.65);
  box-shadow:
    0 0 14px rgba(26,255,213,.18),
    inset 0 0 0 1px rgba(26,255,213,.25);
  background:
    conic-gradient(from 180deg, rgba(26,255,213,.16), rgba(123,241,255,.16)) ,
    var(--card);
}

input[type="checkbox"]:checked::after{
  content:"";
  position:absolute; left:6px; top:0px;
  width:6px; height:10px;
  border-right:2px solid var(--neon);
  border-bottom:2px solid var(--neon);
  transform: rotate(45deg);
  filter: drop-shadow(0 0 6px rgba(26,255,213,.6));
}

input[type="checkbox"]:disabled{
  opacity:.5; 
  cursor:not-allowed;
}

@media (prefers-reduced-motion: reduce){
  input[type="checkbox"]{ transition:none }
}

.grid{
  position:relative;
  background:
    linear-gradient(to right, var(--grid) 1px, transparent 1px) 0 0/ 32px 32px,
    linear-gradient(to bottom, var(--grid) 1px, transparent 1px) 0 0/ 32px 32px,
    linear-gradient(135deg, rgba(26,255,213,.08), rgba(123,241,255,.08));
  margin-top: 25px;
  border:1px solid rgba(122,222,255,.15);
  border-radius: 18px; 
  padding: 0 45px 20px 45px;
  box-shadow: 0 10px 35px rgba(0,0,0,.35), inset 0 0 0 1px rgba(26,255,213,.05);
}

@media screen and (max-width: 720px){
  .grid{
    padding: 0 20px 16px 20px;
  }
}

@media screen and (max-width: 1025px){
  .grid{
    margin-left: 15px;
    margin-right: 15px;
  }
}

.cards{
  display:grid; gap:16px;
  margin-top: 23px;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
}

.cards .card { will-change: transform, opacity; }

.cards .card.is-entering,
.cards .card.is-exiting {
  /* allow GPU to prep */
  will-change: transform, opacity;
}

@media (prefers-reduced-motion: reduce) {
  .cards .card { transition: none !important; }
}

.cards .card.is-leader {
  box-shadow:
    0 0 0 1px rgba(26,255,213,.22),
    0 14px 36px rgba(26,255,213,.10);
  position: relative;
}

.cards .card.is-leader::after {
  content: "";
  pointer-events: none;
  position: absolute; inset: -2px; border-radius: 18px;
  filter: blur(16px);
  opacity: .28;
  animation: leaderPulse 2.4s ease-in-out infinite;
}

.card-rank{
  position:absolute;
  top:-8px;
  left:-5px;
  width:34px;
  height:34px;
  display:none;
  place-items:center;
  border-radius:12px;
  z-index:2;
  pointer-events:none;
  background: rgba(11,15,20,.8);
  border:1px solid rgba(122,222,255,.18);
  box-shadow: 0 6px 18px rgba(0,0,0,.35);
}
.cards .card:nth-child(-n+3) .card-rank{ display:grid; }

.card-rank::before{
  content:"";
  font-weight: 900;
  font-size: 18px;
  line-height: 1;
  letter-spacing: .2px;
  font-variant-numeric: tabular-nums;
}

.cards .card:nth-child(1) .card-rank{
  border-color: color-mix(in srgb, var(--watch) 45%, rgba(122,222,255,.18));
  box-shadow: 0 10px 22px rgba(0,0,0,.45);
}
.cards .card:nth-child(1) .card-rank::before{
  content:"1";
  color: transparent;
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--watch) 92%, white) 0%,
    var(--watch) 18%,
    var(--shill) 55%,
    var(--avoid) 100%
  );
  -webkit-background-clip: text;
  background-clip: text;
  background-size: 100% 180%;
  background-position: 0% 0%;
  filter:
    drop-shadow(0 0 6px color-mix(in srgb, var(--watch) 55%, transparent))
    drop-shadow(0 0 12px color-mix(in srgb, var(--shill) 45%, transparent));
  animation: fdv-rank-flame 1.25s ease-in-out infinite;
}
.cards .card:nth-child(1) .card-rank::after{
  content:"";
  position:absolute;
  inset:-8px;
  border-radius:14px;
  pointer-events:none;
}

@keyframes fdv-rank-flame{
  0%,100%{ background-position: 0% 0%; transform: translateY(0) skewX(0deg); }
  45%{ background-position: 0% 55%; transform: translateY(-1px) skewX(-2deg); }
  70%{ background-position: 0% 25%; transform: translateY(0) skewX(2deg); }
}
@keyframes fdv-rank-flicker{
  0%,100%{ opacity: .45; transform: translateY(1px) scale(1); }
  35%{ opacity: .70; transform: translateY(-1px) scale(1.02); }
  70%{ opacity: .52; transform: translateY(0) scale(1.01); }
}

/* #2: silver */
.cards .card:nth-child(2) .card-rank::before{
  content:"2";
  color: transparent;
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--text) 92%, white) 0%,
    var(--text) 35%,
    color-mix(in srgb, var(--text) 45%, var(--muted)) 100%
  );
  -webkit-background-clip:text;
  background-clip:text;
  filter: drop-shadow(0 0 10px rgba(255,255,255,.08));
}

/* #3: bronze */
.cards .card:nth-child(3) .card-rank::before{
  content:"3";
  color: transparent;
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--watch) 35%, var(--shill)) 0%,
    var(--shill) 55%,
    color-mix(in srgb, var(--shill) 55%, var(--avoid)) 100%
  );
  -webkit-background-clip:text;
  background-clip:text;
  filter: drop-shadow(0 0 10px rgba(0,0,0,.25));
}

@media (prefers-reduced-motion: reduce) {
  .cards .card:nth-child(1) .card-rank::before,
  .cards .card:nth-child(1) .card-rank::after{
    animation: none;
  }
}

@keyframes leaderPulse {
  0%, 100% { opacity: .22; filter: blur(14px); }
  50%      { opacity: .38; filter: blur(18px); }
}

@media (prefers-reduced-motion: reduce) {
  .cards .card.is-leader::after { animation: none; }
}


.card{
  position:relative; 
  z-index:0;
  background: black;
  will-change: transform, box-shadow;
  border-radius:16px;
  padding:10px 10px 12px;
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.card::before{
  pointer-events:none; 
  z-index: 0;
  content:""; position:absolute; inset:-2px; border-radius:18px;
  filter: blur(18px); opacity:.0; transition: .25s opacity;
}
.card:hover{ border-color: rgba(26,255,213,.35); box-shadow: 0 10px 30px rgba(26,255,213,.08)}
.card:hover::before{opacity:.6}

.card a {
  position:relative; z-index:1;
}

.card .top{display:flex; align-items:center; gap:10px}
.logo{
  width:42px; height:42px; border-radius:10px; background: #0b111d; display:flex; align-items:center; justify-content:center;
  border:1px solid rgba(122,222,255,.2); overflow:hidden;
}
.logo img{width:100%; height:100%; object-fit:cover}
.sym{font-weight:600; font-size:1.05rem}
.name{color:var(--muted); font-size:.92rem}
.addr{color:var(--muted); font-size:.82rem; padding:5px;}
.badge{
    color: var(--neon);
    border-radius: 999px;
    font-size: .72rem;
}
.metrics{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:10px 0 6px}
.kv{background: rgba(123,241,255,.06); border:1px solid rgba(122,222,255,.16); border-radius:12px; padding:8px}
.kv .k{color:var(--muted); font-size:.78rem}
.kv .v{font-weight:600; letter-spacing:.2px; margin-top:1px}
.kv .spark{
  width: 100%;
  height: 28px;
  display: block;
  opacity: .9;
  filter: drop-shadow(0 0 0.25rem rgba(123,215,255,.12));
}

.delta{display:flex; gap:6px; flex-wrap:wrap; margin:6px 0}
.delta .pill{
  border:1px solid rgba(122,222,255,.18); border-radius:999px; padding:3px 8px; font-size:.76rem;
  background: rgba(11,15,20,.8)
}
.pill.up{color:#aaffb0; border-color:rgba(0,255,0,.25)}
.pill.down{color:#ff98ad; border-color:rgba(255,77,109,.35)}
.tagline{color:var(--muted); font-size:.88rem; margin:6px 0 10px}

.actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap;justify-content: space-between; margin-top: 15px;}

.swapCoin{
    font-size: 1.1rem;
    border: 2px solid rgb(115 200 227 / 60%) !important;
    margin-right: 5px;
}

.btn{
  display:inline-flex; align-items:center; justify-content: center; gap:8px; padding:13px 12px; border-radius:12px; font-weight:600; letter-spacing:.2px;
  /* background: linear-gradient(90deg, rgb(0 0 0 / 15%), rgb(11 156 173 / 15%)); */
  background: transparent;
  border:1px solid rgba(122,222,255,.28); color:var(--text); text-decoration:none; cursor: pointer;
}
.btn:hover{filter:brightness(1.1); border-color: var(--fdv-info); box-shadow: 0 0 12px rgba(26,255,122,.1)}
.btn.buy{border-color: rgba(26,255,122,.45); box-shadow: inset 0 0 0 1px rgba(26,255,122,.2)}
.btn.info{opacity:.9}

.btn[aria-busy="true"]{ position:relative; pointer-events:none; filter:saturate(.7) brightness(.95) }
.btn[aria-busy="true"]::after{
  content:"";
  position:absolute;
  right:10px;
  top:calc(50% - .45em);
  width:.9em;
  aspect-ratio:1;
  border-radius:50%;
  border:2px solid currentColor;
  border-right-color:transparent;
  animation: spin .6s linear infinite;
}

.holdCoin{
  font-weight:600;
  background: transparent;
  transition: transform .14s ease, box-shadow .14s ease, filter .14s ease, background .14s ease;
}
.holdCoin:hover{ box-shadow: var(--shadow-1) }
.holdCoin:active{ transform: translateY(0) scale(.99) }

.innerControls .btn {
  background: black;
}

.rec{margin-left:auto; font-weight:700; font-size:.9rem; padding:6px 10px; border-radius:10px; border:1px solid; }
.rec.GOOD  { color: var(--good);   border-color: rgba(26,255,122,.45); background: rgba(26,255,122,.08)}
.rec.WATCH{ color: var(--watch); border-color: rgba(255,209,102,.45); background: rgba(255,209,102,.08)}
.rec.AVOID{ color: var(--avoid); border-color: rgba(255,77,109,.45);  background: rgba(255,77,109,.08)}
.rec.SHILL{ color: var(--shill); border-color: rgba(138,99,210,.45);  background: rgba(138,99,210,.08)}

.iconrow{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.iconbtn{
  display:inline-flex;align-items:center;justify-content:center;
  width:20px;height:20px;border-radius:10px;padding: 3px;
  border:1px solid rgba(122,222,255,.22);
  background:rgba(123,241,255,.06); color:var(--text);
  transition:transform .12s ease, filter .12s ease, border-color .12s ease;
  margin-right: 6px;
  margin-bottom: 10px;
}

/* Dashboard cards: keep icons larger (also while hovered/floated to <body>) */
.cards .iconbtn,
.card.is-floating .iconbtn{ width:40px; height:40px; }
.iconbtn:hover {
  filter:brightness(1.12);
  border-color:rgba(26,255,213,.45)
}

.cards .iconbtn {
  background: none !important;
  border: none !important;
}

.iconbtn:active{transform:scale(.97)}
.iconbtn svg{display:block}
.iconbtn[data-tooltip]{position:relative}
.iconbtn[data-tooltip]:hover::after{
  z-index: 9999;
  content:attr(data-tooltip);
  position:absolute;
  bottom:-28px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0, 0, 0, 0.95);
  border:1px solid rgba(122,222,255,.25);
  padding:3px 6px;
  border-radius:6px;
  font-size:11px;
  color:var(--muted);
  white-space:nowrap;
}

.fdv-chart-tooltip{
  position: fixed;
  z-index: 100000;
  display: none;
  width: min(860px, calc(100vw - 24px));
  height: min(560px, calc(100vh - 24px));
  background: rgba(0, 0, 0, 0.92);
  border: 1px solid rgba(122,222,255,.28);
  border-radius: 14px;
  box-shadow: 0 14px 44px rgba(0,0,0,.6);
  backdrop-filter: blur(8px);
  overflow: hidden;
  pointer-events: auto;
}
.fdv-chart-tooltip[data-open="1"]{ display: flex; flex-direction: column; }

.fdv-chart-tooltip__header{
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-bottom: 1px solid rgba(122,222,255,.18);
  background: rgba(9, 12, 18, 0.65);
}
.fdv-chart-tooltip__title{
  font-weight: 800;
  color: var(--text);
  letter-spacing: 0.2px;
}
.fdv-chart-tooltip__mint{
  margin-left: auto;
  color: var(--muted);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 12px;
  max-width: 52ch;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.fdv-chart-tooltip__close{
  width: 28px;
  height: 28px;
  border-radius: 10px;
  border: 1px solid rgba(122,222,255,.22);
  background: rgba(123,241,255,.06);
  color: var(--text);
  cursor: pointer;
  line-height: 1;
  font-size: 18px;
}
.fdv-chart-tooltip__reload{
  width: 28px;
  height: 28px;
  border-radius: 10px;
  border: 1px solid rgba(122,222,255,.22);
  background: rgba(123,241,255,.06);
  color: var(--text);
  cursor: pointer;
  line-height: 1;
  font-size: 16px;
}
.fdv-chart-tooltip__open{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 28px;
  padding: 0 10px;
  border-radius: 10px;
  border: 1px solid rgba(122,222,255,.22);
  background: rgba(123,241,255,.06);
  color: var(--text);
  cursor: pointer;
  text-decoration: none;
  font-size: 12px;
  font-weight: 700;
}
.fdv-chart-tooltip__open[aria-disabled="true"]{ opacity: .55; pointer-events: none; }
.fdv-chart-tooltip__close:hover{ filter: brightness(1.12); border-color: rgba(26,255,213,.45); }
.fdv-chart-tooltip__reload:hover{ filter: brightness(1.12); border-color: rgba(26,255,213,.45); }
.fdv-chart-tooltip__open:hover{ filter: brightness(1.12); border-color: rgba(26,255,213,.45); }

.fdv-chart-tooltip__frame{
  flex: 1 1 auto;
  width: 100%;
  height: 100%;
  border: 0;
  background: #000;
}

.fdv-chart-embed{
  width: 100%;
  height: min(560px, 62vh);
  display: flex;
  flex-direction: column;
  background: rgba(0, 0, 0, 0.65);
  border: 1px solid rgba(122,222,255,.18);
  border-radius: 14px;
  box-shadow: 0 12px 30px rgba(0,0,0,.35);
  overflow: hidden;
}

@keyframes fdv-jiggle{
  0%{ transform: translateX(0); }
  18%{ transform: translateX(-1px); }
  36%{ transform: translateX(1px); }
  54%{ transform: translateX(-1px); }
  72%{ transform: translateX(1px); }
  100%{ transform: translateX(0); }
}

.fdv-jiggle-hint{
  animation: fdv-jiggle 360ms ease-in-out 0s 1;
  will-change: transform;
}

@media (prefers-reduced-motion: reduce){
  .fdv-jiggle-hint{ animation: none !important; }
}

.fdv-chart-tooltip__hint{
  padding: 8px 12px;
  border-top: 1px solid rgba(122,222,255,.12);
  color: rgba(154, 207, 238, 0.7);
  font-size: 11px;
  background: rgba(9, 12, 18, 0.55);
}
.fdv-chart-tooltip__hint code{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 11px;
  color: rgba(123,215,255,.9);
}

.card .micro {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    margin-top: 26px;
}
.card .micro .micro-left{ min-width: 0; flex: 1 1 auto; }
.card .micro .micro-fav{
    position: relative;
    width: 52px;
    /* min-width: 42px; */
    height: 34px;
    /* padding: 0; */
    margin: 0;
    background: transparent;
    border: none;
    /* border-radius: 10px; */
    font-size: 14px;
    line-height: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0;
    flex-direction: row;
    overflow: hidden;
    transform-origin: center;
}
.card .micro .micro-fav::after{
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  opacity: 0;
  transform: scale(.2);
  background: radial-gradient(circle at center, rgba(255, 110, 180, .35), rgba(255, 110, 180, 0) 60%);
}
.card .micro .micro-fav:active{ transform: scale(.96); }
.card .micro .micro-fav:active::after{ animation: fdvFavRipple 260ms ease-out; }
.card .micro .micro-fav:active .fdv-lib-heart{ animation: fdvFavPop 220ms ease-out; }
.card .micro .micro-fav:active .fdv-lib-count{ animation: fdvFavNudge 220ms ease-out; }
.card .micro .micro-fav.on,
.card .micro .micro-fav[aria-pressed="true"]{
  border-color: var(--neon2);
  filter: brightness(1.06);
}
.card .micro .micro-fav .fdv-lib-count{
    position: absolute;
    top: 19px;
    right: 0px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
}
.card .micro .micro-fav .fdv-lib-heart{ margin:0; display: inline-block; font-size: 22px; line-height: 1; }

@keyframes fdvFavPop{
  0%{ transform: scale(.88); }
  55%{ transform: scale(1.18); }
  100%{ transform: scale(1); }
}
@keyframes fdvFavNudge{
  0%{ transform: translateY(0); }
  55%{ transform: translateY(-1px); }
  100%{ transform: translateY(0); }
}
@keyframes fdvFavRipple{
  0%{ opacity: .45; transform: scale(.2); }
  100%{ opacity: 0; transform: scale(1.05); }
}

@media (prefers-reduced-motion: reduce){
  .card .micro .micro-fav:active{ transform: none; }
  .card .micro .micro-fav:active::after,
  .card .micro .micro-fav:active .fdv-lib-heart,
  .card .micro .micro-fav:active .fdv-lib-count{ animation: none; }
}
.micro .spark {
  width: 120px; height: 32px; display: block; opacity: .9;
  filter: drop-shadow(0 0 0.25rem rgba(123,215,255,.15));
}
.micro .bars {
  display: grid; grid-auto-flow: column; gap: 4px;
}
.micro .bar {
  width: 5px; height: 28px; border-radius: 3px;
  background: linear-gradient(to top, rgba(123,215,255,.2), rgba(123,215,255,.35));
  overflow: hidden; position: relative;
}
.micro .bar > i {
  position: absolute; bottom: 0; left: 0; right: 0;
  background: var(--neon, #7bd7ff);
  height: 0%;
}
.micro .bar[data-k="momentum"]  { background: linear-gradient(to top, rgba(255,180,80,.18), rgba(255,180,80,.35)); }
.micro .bar[data-k="activity"]  { background: linear-gradient(to top, rgba(180,255,160,.18), rgba(180,255,160,.35)); }
.micro label {
  position:absolute; left:0; right:0; bottom:-14px; font-size:10px; text-align:center; color:#9acfee90;
}

.micro .pctrow {
  display: flex; 
  gap: 6px; 
  align-items: center;
  margin-bottom: 4px;
}
.micro .pct {
  display: inline-block;
  position: relative;
  font-size: 13px; line-height: 1;
  padding: 13px 6px 4px 15px;
  border-radius: 999px;
  border: 1px solid transparent;
  background: rgba(148,163,184,.10); 
  color: #cbd5e1;                   
  letter-spacing: .1px;
  user-select: none;

  transform: translateZ(0);
  animation: fdvChipIn 160ms ease-out both;
}
.micro .pct[data-tf]::before {
  content: attr(data-tf);
  position: absolute;
  top: -5px;
  left: 10px;
  font-size: 15px;
  line-height: 1;
  letter-spacing: .2px;
  opacity: .72;
  transform: translateY(0);
  color: var(--fdv-info);
  filter: saturate(.92) brightness(.95);
  pointer-events: none;
  animation: fdvChipLabelIn 220ms cubic-bezier(.22,1,.36,1) both;
}

@keyframes fdvChipIn {
  from { opacity: 0; transform: translateY(2px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes fdvChipLabelIn {
  from { opacity: 0; transform: translateY(1px); }
  to   { opacity: .72; transform: translateY(0); }
}

@media (prefers-reduced-motion: reduce) {
  .micro .pct { animation: none; }
  .micro .pct[data-tf]::before { animation: none; }
}
.micro .pct.up {
  color: var(--green, #19c37d);
  border-color: rgba(25,195,125,.30);
  border-color: color-mix(in srgb, var(--green, #19c37d) 30%, transparent);
}
.micro .pct.down {
  color: var(--red, #ff5b5b);
  border-color: rgba(255,91,91,.30);
  border-color: color-mix(in srgb, var(--red, #ff5b5b) 30%, transparent);
}
.micro .pct.flat {
  color: #9fb9c9;
  background: rgba(123,215,255,.08);
  border-color: rgba(123,215,255,.18);
}

@media (max-width: 768px) {
  .micro .pct { padding: 9px 6px 4px; }
  .micro .pct[data-tf]::before { font-size: 8px; opacity: .68; }
}

@media (max-width: 480px) {
  .micro .pct { padding: 4px 6px; }
  .micro .pct[data-tf]::before { display: none; }
}

footer {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color:var(--muted);
    font-size:.66rem;
    margin-top:14px
}

hr.sep{border:0; border-top:1px dashed var(--dash); margin:10px 0}
.hidden{display:none}

.search-wrap{
  --ring: rgba(0,255,178,.25);
  --ring-strong: rgba(0,255,178,.45);
  --edge: var(--border);

  position: relative;
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
    align-items: center;
  gap: 8px;

  width: 100%;
  max-inline-size: 720px; 
  margin-inline: auto;
  margin-block: 0 16px;

  padding: 10px 12px;
  border-radius: 14px;
  background:
    radial-gradient(60% 120% at 15% 0%, rgba(0,255,178,.06), transparent),
    radial-gradient(60% 140% at 85% 120%, rgba(125,255,207,.05), transparent),
    var(--panel);
  border: 1px solid var(--edge);
  box-shadow: 0 10px 28px rgba(0,0,0,.35), inset 0 0 0 1px rgba(26,255,213,.05);
  backdrop-filter: blur(6px);
  transition: border-color .18s ease, box-shadow .18s ease, transform .18s ease;
  z-index: 999;
}

.controls .search-wrap{
  flex: 1 1 420px;  
  align-self: stretch;
}

.search-wrap:focus-within{
  border-color: var(--ring-strong);
  box-shadow:
    0 10px 30px rgba(26,255,213,.10),
    inset 0 0 0 1px rgba(26,255,213,.18),
    0 0 0 3px rgba(26,255,213,.12);
}

.search-ico {
  grid-column: 1 / 2;
  color: var(--muted);
  opacity: .9;
  display: flex;
  align-items: center;
  justify-content: center;
}
.search-ico svg {
  width: 18px;
  height: 18px;
  stroke: var(--muted);
}

.search-wrap:focus-within .search-ico svg {
  stroke: var(--neon);
  filter: drop-shadow(0 0 4px var(--neon));
}

.search-input{
  grid-column: 2 / 3;      
  width: 100%;
  min-width: 0;           
  padding: 10px 6px;
  border: 0;
  background: transparent;
  color: var(--text);
  outline: none;
}
.search-input::placeholder{
  color: rgba(157, 176, 198, .75);                 /* fallback */
  color: color-mix(in srgb, var(--muted) 75%, transparent);
}

.search-clear{
  grid-column: 3 / 4;
  width: 28px; height: 28px; line-height: 26px;
  border-radius: 8px;
  border: 1px solid rgba(122,222,255,.18);
  background: rgba(123,241,255,.06);
  color: var(--muted);
  display: none; 
  justify-self: center;
  cursor: pointer;
  transition: filter .12s ease, border-color .12s ease, transform .12s ease;
}
.search-clear:hover{ filter: brightness(1.12); border-color: rgba(26,255,213,.35); }
.search-wrap[data-hastext="1"] .search-clear{ display: inline-flex; align-items:center; justify-content:center; }

/* tiny loader dot when searching */
.search-wrap::after{
  content: '';
  grid-column: 3 / 4;
  justify-self: center;
  width: 14px; height: 14px;
  border-radius: 50%;
  background:
    radial-gradient(circle at 30% 30%, var(--neon) 35%, transparent 36%) no-repeat 0 0/100% 100%;
  opacity: 0;
  filter: drop-shadow(0 0 6px rgba(26,255,213,.6));
  transition: opacity .12s ease;
  pointer-events: none;
}
.search-wrap[data-loading="1"]::after{ opacity: .9; animation: dotPulse 1.2s ease-in-out infinite; }
@keyframes dotPulse{ 0%,100%{ transform: translateX(0)} 50%{ transform: translateX(2px)} }

.search-results{
  position: absolute;
  top: calc(100% + 8px);
  left: 0; right: 0;
  background: linear-gradient(180deg, rgba(15,22,37,.96), rgba(15,22,37,.88));
  border: 1px solid rgba(122,222,255,.18);
  border-radius: 14px;
  overflow: hidden;
  z-index: 2000; 
  box-shadow: 0 16px 40px rgba(0,0,0,.45), inset 0 0 0 1px rgba(26,255,213,.05);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

.search-results .row{
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 10px;
  padding: 12px 14px;
  align-items: center;
  text-decoration: none;
  color: inherit;
  border-bottom: 1px dashed rgba(122,222,255,.10);
}
.search-results .row:last-child{ border-bottom: 0; }

.search-results .row:hover,
.search-results .row.is-active{
  background: rgba(26,255,213,.10); /* fallback */
  background: color-mix(in srgb, var(--neon, #1affd5) 10%, transparent);
}

.search-results .sym{ font-weight: 700; letter-spacing: .2px; }
.search-results .name{ color: var(--muted); }
.search-results .mint{
  margin-top: 2px;
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
  font-size: .8rem;
  color: color-mix(in srgb, var(--muted) 80%, transparent);
}
.search-results .badge{
  border:1px solid rgba(26,255,213,.35);
  color: var(--neon);
  padding: 2px 8px;
  border-radius: 999px;
  font-size: .72rem;
  background: rgba(26,255,213,.08);
}
.search-results .empty{
  padding: 12px 14px;
  color: var(--muted);
  font-style: italic;
}

@media (max-width: 640px){
  .search-wrap{
    grid-template-columns: 5px 1fr 10px;
    border-radius: 12px;
  }
  .search-results{ border-radius: 12px; }
}

.search-results .badge { font-size: 12px; padding: 2px 6px; border: 1px solid #333; border-radius: 999px; opacity: .8; }
.search-results .empty { padding: 10px 12px; opacity: .6; font-style: italic; }

.header{ z-index: 1000; }


.searchbar{flex:1; min-width:240px; display:flex; align-items:center; gap:8px}
.searchbar input{width:100%}


.marquee-wrap { overflow: hidden; }
.mq-row { display:flex; align-items:center; gap:10px; margin:6px 0; }
.mq-label { flex:0 0 auto; font-size:12px; font-weight:700; padding:4px 8px; border-radius:999px; background:#111; color:#fff; letter-spacing:.4px; text-transform:uppercase; }
.mq-strip { display:flex; gap:14px; overflow:hidden; mask-image: linear-gradient(to right, transparent 0, #000 40px, #000 calc(100% - 40px), transparent 100%); }
.mq-item { display:flex; align-items:center; gap:8px; padding: 7px 30px 6px 3px; border-radius:999px; background: rgb(0 0 0 / 72%); color:inherit; text-decoration:none; white-space:nowrap; }
.mq-item:hover { background:rgba(255,255,255,.12); }
.mq-logo { width:18px; height:18px; border-radius:50%; object-fit:cover; background:#222; }
.mq-sym { font-weight:700; font-size:12px; }
.mq-name { opacity:.8; font-size:12px; }
.mq-price { opacity:.8; font-size:12px; }
.mq-gap { width:24px; flex:0 0 auto; }
.mq-strip-inner { display:flex; gap:14px; }



.small{font-size:.78rem;color:var(--muted)}

.adcard{
  position: relative;
  display: block;
  margin: 22px 0;
  padding: var(--pad);
  border-radius: 14px;
  background: var(--bg);
  border: 1px solid var(--edge);
  box-shadow: 0 10px 24px rgba(0,0,0,.25), inset 0 0 0 1px rgba(26,255,213,.05);
  transition: border-color .18s ease, box-shadow .18s ease, transform .18s ease, background .18s ease;
  will-change: transform, box-shadow;
}

.adcard::before{
  content:""; position:absolute; inset:-2px; border-radius: 16px;
  pointer-events:none;
  background: radial-gradient(600px 220px at var(--mx, 20%) var(--my, -10%), rgba(26,255,213,.10), transparent 55%);
  opacity: .0;
  transition: opacity .2s ease, transform .2s ease, filter .2s ease;
  filter: blur(14px);
}
.adcard:hover{ border-color: rgba(26,255,213,.35); box-shadow: 0 12px 28px rgba(26,255,213,.10), inset 0 0 0 1px rgba(26,255,213,.08) }
.adcard:hover::before{ opacity: .65 }

.adclose{
  position:absolute;
  top:-12px;
  right:-12px;
  width:30px;
  height:30px;
  border-radius:999px;
  display:grid;
  place-items:center;
  background: transparent;
  border:none;
  color: var(--text);
  opacity: .9;
  cursor:pointer;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
  box-shadow: 0 10px 24px rgba(0,0,0,.28), inset 0 0 0 1px rgba(26,255,213,.06);
  transition: transform .12s ease, filter .12s ease, border-color .12s ease, background .12s ease, opacity .12s ease;
  z-index: 2;
}
.adclose:hover{ filter:brightness(1.08); border-color: rgba(26,255,213,.55); opacity: 1; }
.adclose:active{ transform: translateY(1px) }
.adclose:focus-visible{
  outline:none;
  box-shadow:
    0 0 0 3px rgba(26,255,213,.14),
    0 10px 24px rgba(0,0,0,.28),
    inset 0 0 0 1px rgba(26,255,213,.24);
  border-color: rgba(26,255,213,.45);
}

@media (prefers-reduced-motion: reduce){
  .adcard, .adcard::before { transition: none }
}

.adrow{
  display:grid;
  grid-template-columns: 56px 1fr auto;
  gap: 12px;
  align-items:center;
}

.adlogo{
  width:56px;height:56px;border-radius:12px; overflow:hidden;
  border:1px solid rgba(122,222,255,.25); background:#0b111d;
  box-shadow: 0 10px 24px rgba(0,0,0,.35), inset 0 0 0 1px rgba(26,255,213,.08);
  transform: translateZ(0);
}
.adlogo img{ width:100%; height:100%; object-fit:cover; display:block }

.admain{ min-width:0 }
.adtitle{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; min-width:0 }
.adtitle .sym{ font-weight:800; font-size:1.02rem; letter-spacing:.2px }
.adtitle .mint{
  max-width: 100%;
  min-width: 0;
}
.adtitle .mint a{
  color:var(--muted); font-size:.82rem; opacity:.9; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

.adtag{
  margin-left:auto; font-weight:800; font-size:.78rem; padding:6px 10px; border-radius:999px;
  border:1px solid var(--badge-border); color:var(--badge); background: color-mix(in srgb, var(--badge) 8%, transparent);
  position:relative; overflow:hidden; line-height:1;
}
.adtag[data-open="1"]{ color:#111; background:#ffd166; border-color:#ffcf66; }

.adtagline{
  margin-top: 4px;
  color: var(--muted);
  font-size: .92rem;
  line-height: 1.22;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.admeta{
  display:flex; flex-wrap:wrap; gap:6px; margin-top:8px;
}
.admeta .pill{
  display:inline-flex; align-items:center; gap:6px;
  padding:3px 8px; border-radius:999px;
  background: rgba(148,163,184,.08);
  border:1px solid rgba(122,222,255,.14);
  color: inherit; white-space: nowrap; font-size: 12px;
}
.admeta .pill .k{ opacity:.78; margin-right:2px; font-size:.88em; }
.admeta .pill .v{ font-weight:800; letter-spacing:.2px; }

.adactions{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; align-items:center }
.adbtn{
  position: relative;
  display:inline-flex; align-items:center; gap:8px;
  padding: 9px 12px; border-radius:10px; font-weight:600;
  background: transparent;
  border:1px solid var(--border); color:var(--text); text-decoration:none; cursor:pointer;
  transition: transform .12s ease, filter .12s ease, border-color .12s ease, background .12s ease;
  user-select: none;
}
.adbtn:hover{ filter:brightness(1.1); border-color: rgba(0,255,178,.55) }
.adbtn:active{ transform: translateY(1px) }
.adbtn.primary{
  border-color: var(--neon);
  background: linear-gradient(180deg, rgba(0,255,178,.12), rgba(0,255,178,.02));
  box-shadow: inset 0 0 0 1px rgba(26,255,122,.18);
}

/* Button ripple (via JS) */
.adbtn .ripple{
  position:absolute; inset:auto; top:50%; left:50%;
  width: 6px; height: 6px; border-radius: 999px;
  background: color-mix(in srgb, var(--neon,#1affd5) 65%, transparent);
  transform: translate(-50%, -50%) scale(1);
  opacity: .6;
  pointer-events: none;
  animation: adRipple .6s ease-out forwards;
}
@keyframes adRipple {
  to { transform: translate(-50%, -50%) scale(28); opacity: 0; }
}

/* Expandable extra panel */
.adextra{
  margin-top: 10px;
  padding: 10px;
  border-radius: 12px;
  border: 1px dashed rgba(122,222,255,.20);
  background: rgba(0,0,0,.20);
  display: grid;
  gap: 8px;
}
.adcard:not(.is-open) .adextra{ display: none; }
.adtoggle{
  display:inline-flex; align-items:center; gap:6px; margin-left:auto;
  font-size: 12px; color: var(--muted); cursor: pointer; user-select: none;
}
.adtoggle svg{ transition: transform .15s ease; }
.adcard.is-open .adtoggle svg{ transform: rotate(180deg); }

/* Responsive */
@media (max-width: 900px){
  .adrow{ grid-template-columns: 48px 1fr; grid-auto-rows: auto; gap:18px }
  .adlogo{ width:48px; height:48px; border-radius:10px }
  .adtitle .sym{ font-size: 1rem }
  .adtitle .mint a{ font-size: .8rem }
  .adactions{ grid-column: 1 / -1; justify-content: stretch }
  .adbtn{ flex:1; justify-content:center; padding: 10px }
}

@media (max-width: 640px){
  .adrow{ grid-template-columns: 44px 1fr; gap: 18px }
  .adlogo{ width:44px; height:44px; border-radius:10px }
  .adtagline{ -webkit-line-clamp: 2; font-size: .9rem }
  .admeta{ gap: 6px }
}

@media (max-width: 400px){
  .adrow{ grid-template-columns: 40px 1fr; }
  .adlogo{ width:40px; height:40px; border-radius:9px }
  .adtitle .mint{ display:none } /* hide secondary line on tiny widths */
  .adbtn{ padding: 9px 10px }
}

.adcard[data-interactive="1"]:hover{ transform: translateY(-1px) }
.adcard[data-interactive="1"]:hover::before{ opacity:.6 }

.fdv-modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.55);
  display:none; align-items:center; justify-content:center; z-index:9999 }
.fdv-modal-backdrop.show{ display:flex }

.fdv-modal{
  display: none;
  margin-top: 25px;
  position: relative;
  background:var(--fdv-surface); 
  color:var(--fdv-fg);
  border:1px solid var(--fdv-border); 
  border-radius:16px;
  box-shadow:0 20px 60px rgba(0,0,0,.45);
  flex-direction:column; 
  overflow:hidden;
  z-index: 9999;
  animation:fdv-pop .16s ease-out;
}

.fdv-guide > div{
  margin-bottom:8px;
  padding:8px 12px;
  font-size:.9rem;
}

@keyframes fdv-pop{ from{ transform:translateY(6px) scale(.985); opacity:.75 } to{ transform:none; opacity:1 } }

.fdv-modal-header{
  display:flex; gap:12px; align-items:flex-start; justify-content:space-between;
  padding:14px 16px; border-bottom: 1px solid var(--fdv-border);
}


.fdv-tab-btn {
    appearance: none;
    border: 0;
    background: var(--fdv-bg);
    color: var(--fdv-muted);
    font-size: 1rem;
    padding: 8px 12px;
    border-radius: 10px 10px 0 0;
    cursor: pointer;
    transition: border-color .18s ease, color .18s ease;
}

.fdv-tab-btn.active {
    border: 1px solid var(--fdv-border);
    border-bottom-color: var(--fdv-surface);
    color: var(--fdv-fg);
    background: var(--fdv-surface);
}

.fdv-title-wrap{width: 100%;}
.fdv-header-controls {
    display: flex;
    width: 100%;
    justify-content: space-between;
    flex-direction: row;
    align-items: center;
}
.fdv-title{ margin:0; font-size:1.1rem; }
.fdv-chips{ display:flex; gap:8px; flex-wrap:wrap; margin-top:6px; }
.fdv-chip{ font-size:.78rem; padding:4px 8px; border-radius:999px;
  background:#0e131c; border:1px solid var(--fdv-border); color:var(--fdv-muted) }
.fdv-chip-fee{ color:#a6ffea; border-color:#184f49; background:#0a1514 }
.fdv-chip-wallet{ color:#c9d2df }

.fdv-close{ appearance:none; border:0; background:transparent; color:var(--fdv-muted);
  font-size:22px; cursor:pointer; line-height:1 }

.fdv-modal-body{
  display:grid; grid-template-columns: 1.35fr .65fr; gap:16px;
  padding:16px; overflow:auto;
}

/* Auto Wallet modal (trader widget) */
.fdv-wallet-modal{
  width: min(720px, 92vw);
  max-height: min(80vh, 720px);
}

.fdv-unwind-modal{
  width: min(520px, 92vw);
  max-height: min(80vh, 520px);
  margin-top: 0;
  align-self: center;
}

.fdv-wallet-modal-body{
  display:flex;
  flex-direction:column;
  gap: 10px;
}

.fdv-wallet-actions{
  display:flex;
  justify-content:flex-end;
  gap: 8px;
}

.fdv-wallet-dump{
  background:#7f1d1d;
  color:#fff;
  border:1px solid #a11;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
}
.fdv-wallet-dump:hover{ filter: brightness(1.05); }

.fdv-wallet-sol{
  font-size: 12px;
  opacity: .9;
}

.fdv-wallet-list{
  display:flex;
  flex-direction:column;
  gap:6px;
  max-height: 40vh;
  overflow:auto;
}

.fdv-wallet-totals{
  display:flex;
  flex-direction: row;
  justify-content: space-between;
  margin-top: 8px;
  font-weight: 600;
}
.fdv-pane{ background:transparent }
.fdv-pane-form{ display:flex; flex-direction:column; gap:14px }
.fdv-pane-aside{ display:flex; flex-direction:column; gap:12px }

.fdv-token{ display:grid; grid-template-columns: 108px 1fr; gap:12px; padding:8px; border:1px solid var(--fdv-border); border-radius:12px; background:var(--fdv-bg) }
.fdv-token-media{ position:relative }
.fdv-token-header{ width:100%; height:60px; background:var(--fdv-surface); border-radius:10px }
.fdv-token-logo{ position:absolute; left:10px; width:54px; height:54px; border-radius:50%; border:2px solid color-mix(in srgb, var(--fdv-border) 45%, #000); background:#222; object-fit:cover }
.fdv-token-main{ padding-left:8px; display:flex; flex-direction:column; gap:6px }
.fdv-token-title{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.fdv-token-symbol{ font-weight:800; font-size:1rem }
.fdv-token-name{ opacity:.85 }
.fdv-token-external{ margin-left:auto; font-size:.85rem; color:var(--brand2); text-decoration:none }
.fdv-token-price{ display:flex; gap:8px; align-items:center; font-size:1rem; font-weight:700 }
.fdv-token-grid{ display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:10px }
.kv .k{ font-size:.78rem; color:var(--fdv-muted) }
.kv .v{ font-size:.9rem }

.fdv-field{ display:block }
.fdv-label{ display:block; font-size:.9rem; color:var(--fdv-muted); margin:0 0 6px }
.fdv-input{ background:var(--fdv-bg); border:1px solid var(--fdv-border); border-radius:10px;
  display:flex; align-items:center; padding:8px 10px; gap:8px }
.fdv-input input{ appearance:none; border:0; outline:none; background:transparent; color:var(--fdv-fg);
  width:100%; font-size:.95rem }
.fdv-help{ font-size:.8rem; color:var(--fdv-muted); margin-top:6px }
.fdv-row{ display:grid; grid-template-columns: 1fr 1fr; gap:12px }

/* Range sliders (widgets) */
.fdv-range{
  width: 100%;
  margin: 0;
  appearance: none;
  background: transparent;
}

.fdv-range:focus{ outline: none; }

.fdv-range::-webkit-slider-runnable-track{
  height: 8px;
  border-radius: 999px;
  border: 1px solid var(--fdv-border);
  background: var(--fdv-bg);
}

.fdv-range::-webkit-slider-thumb{
  appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 999px;
  background: var(--fdv-surface);
  border: 1px solid var(--fdv-border);
  margin-top: -5px;
}

.fdv-range::-moz-range-track{
  height: 8px;
  border-radius: 999px;
  border: 1px solid var(--fdv-border);
  background: var(--fdv-bg);
}

.fdv-range::-moz-range-thumb{
  width: 16px;
  height: 16px;
  border-radius: 999px;
  background: var(--fdv-surface);
  border: 1px solid var(--fdv-border);
}

.fdv-range-rug::-webkit-slider-runnable-track{
  background: linear-gradient(90deg, var(--good), var(--watch), var(--avoid));
}

.fdv-range-rug::-moz-range-track{
  background: linear-gradient(90deg, var(--good), var(--watch), var(--avoid));
}

.fdv-hold-rug{
  margin: 20px;
  border-radius: 10px;
  padding: 8px 10px;
}

.fdv-hold-rug-row{
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 10px;
  margin-bottom: 6px;
}

.fdv-hold-rug-title{
  font-size: 12px;
  color: var(--fdv-muted);
}

.fdv-hold-rug-value{
  font-size: 12px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  color: var(--fdv-muted);
}

.fdv-hold-rug-slider{
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 10px;
  align-items: center;
}

.fdv-hold-rug-end{
  font-size: 12px;
  opacity: .95;
}

.fdv-input-amount{ justify-content:space-between }
.fdv-quick{ display:flex; gap:6px }
.fdv-quickbtn{ appearance:none; border:1px solid var(--fdv-border); background:var(--fdv-bg);
  color:var(--fdv-fg); font-size:.8rem; padding:6px 8px; border-radius:8px; cursor:pointer }
.fdv-quickbtn:hover{ border-color: color-mix(in srgb, var(--fdv-border) 70%, #000) }

.fdv-input-stepper{ gap:6px; justify-content:flex-start }
.fdv-step{ appearance:none; border:1px solid var(--fdv-border); background:var(--fdv-bg);
  color:var(--fdv-fg); font-size:18px; border-radius:8px; width:34px; height:34px; cursor:pointer }
.fdv-step:active{ transform:translateY(1px) }

.fdv-prequote{ border:1px solid var(--fdv-border); border-radius:12px; background:var(--fdv-bg); padding:10px 12px }
.fdv-prequote .row{ display:flex; justify-content:space-between; gap:10px; margin:4px 0 }
.fdv-prequote .v{ font-weight:700 }

.fdv-note{ border:1px dashed color-mix(in srgb, var(--fdv-border) 80%, #000); border-radius:12px; padding:10px 12px; background:var(--fdv-bg) }
.fdv-note-title{ font-size:.85rem; color:var(--fdv-muted); margin-bottom:6px }
.fdv-note-body{ font-size:.86rem; color: color-mix(in srgb, var(--fdv-fg) 86%, var(--fdv-muted)) }
.fdv-mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace }
.fdv-tiny{ font-size:.78rem; color:var(--fdv-muted); margin-top:4px }

.fdv-wallet{ display:flex; flex-direction:column; gap:8px }
.fdv-btn-phantom{ background:var(--fdv-phantom); color:white }
.fdv-btn-phantom:disabled{ opacity:.65; cursor:not-allowed }
.fdv-btn-phantom.connected{
  opacity: .8;
  cursor: default;
}

.fdv-status{ min-height:180px; background:var(--fdv-bg); border: 1px solid var(--fdv-border); border-radius: 12px; padding: 10px; overflow: hidden; }
.fdv-log{ white-space:pre-wrap; font-size:.9rem; height:160px; overflow:auto }
.fdv-log .ok{ color:var(--fdv-ok) }
.fdv-log .info{ color:var(--fdv-info) }
.fdv-log .help{ color:var(--fdv-help) }
.fdv-log .err{ color:var(--fdv-err) }
.fdv-log .warn{ color:var(--fdv-warn) }

/* Log container - consolidated styles */
.fdv-log {
  position: relative;
  background: var(--fdv-bg);
  border: 1px solid var(--fdv-border);
  border-radius: 10px;
  padding: 0 10px 10px 10px;
  height: clamp(140px, 32vh, 260px);
  overflow: auto;
  resize: none;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: .84rem;
  line-height: 1.35;
  color: var(--fdv-muted);
  white-space: pre-wrap;
  word-break: break-word;
  /* Performance optimizations */
  contain: content;
  content-visibility: auto;
  will-change: scroll-position;
  /* Firefox scrollbar */
  scrollbar-width: thin;
  scrollbar-color: #2a3a50 transparent;
}

/* WebKit scrollbar styles */
.fdv-log::-webkit-scrollbar{
  width: 10px;
  height: 10px;
}
.fdv-log::-webkit-scrollbar-track{
  background: transparent;
}
.fdv-log::-webkit-scrollbar-thumb{
  background: #263244;
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
.fdv-log::-webkit-scrollbar-corner{
  background: transparent;
}

/* Log color classes */
.fdv-log .ok{ color:var(--fdv-ok) }
.fdv-log .info{ color:var(--fdv-info) }
.fdv-log .help{ color:var(--fdv-help) }
.fdv-log .err{ color:var(--fdv-err) }
.fdv-log .warn{ color:var(--fdv-warn) }

/* Log row animations */
.fdv-log .log-row {
  white-space: pre-wrap;
  opacity: 0;
  transform: translateY(1px);
  transition: opacity .1s ease-out, transform .1s ease-out;
}

.fdv-log .log-row.in {
  opacity: 1;
  transform: translateY(0);
}

@media (prefers-reduced-motion: reduce) {
  .fdv-log .log-row { transition: none; transform: none; }
}

.fdv-log{
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: rgba(128,255,205,.35) var(--fdv-bg);
}

.fdv-log::-webkit-scrollbar{
  width: 10px; height: 10px;
}
.fdv-log::-webkit-scrollbar-track{
  background: var(--fdv-bg);
  border: 1px solid var(--fdv-border);
  border-radius: 10px;
}
.fdv-log::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg, rgba(125,255,207,.22), rgba(0,255,178,.22));
  border: 1px solid rgba(128,255,205,.35);
  border-radius: 10px;
}
.fdv-log::-webkit-scrollbar-thumb:hover{
  background: linear-gradient(180deg, rgba(125,255,207,.35), rgba(0,255,178,.35));
  border-color: rgba(128,255,205,.45);
}
.fdv-log::-webkit-scrollbar-corner{
  background: transparent;
}

.fdv-log {
  background: var(--fdv-bg);
  border: 1px solid var(--fdv-border);
  border-radius: 10px;
  padding: 0 10px 10px 10px;
  height: clamp(140px, 32vh, 260px);
  overflow: auto;
  resize: auto;
  font-size: .84rem;
  color: var(--fdv-muted);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  line-height: 1.35;
  white-space: pre-wrap;
  word-break: break-word;
}
/* Nicer scrollbars (WebKit) */
.fdv-log::-webkit-scrollbar{ width:10px; height:10px; }
.fdv-log::-webkit-scrollbar-thumb{ background: #263244; border-radius: 8px; border: 2px solid transparent; background-clip: padding-box; }
.fdv-log::-webkit-scrollbar-track{ background: transparent; }
/* Firefox scrollbar */
.fdv-log{ scrollbar-width: thin; scrollbar-color: #2a3a50 transparent; }

.fdv-log {
  position: relative;
}

.fdv-log::before {
  content:"";
  position:absolute;
  top:0; left:0; right:0;
  height:38px;
  pointer-events:none;
  background:
    linear-gradient(to bottom, rgba(0,0,0,.75), rgba(0,0,0,0));
  z-index:4;
}

.fdv-log [data-auto-log-expand] {
  position: absolute;
  top: 8px;
  left: 10px;
  z-index: 10;
  background: rgba(14,20,30,.92);
  color: #fff;
  border: 1px solid var(--fdv-border);
  padding: 6px 12px;
  font-size: 12px;
  line-height: 1;
  border-radius: 8px;
  cursor: pointer;
  opacity: .92;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  box-shadow: 0 4px 14px rgba(0,0,0,.55), 0 0 0 1px rgba(122,222,255,.20);
}
.fdv-log [data-auto-log-expand]:hover {
  opacity: 1;
  filter: brightness(1.08);
  box-shadow: 0 4px 18px rgba(0,0,0,.65), 0 0 0 1px rgba(122,222,255,.35);
}

.fdv-log-full {
  position: fixed !important;
  inset: 0;
  height: 100% !important;
  z-index: 999999;
  background:#000;
  padding: 0 18px 18px 18px;
  box-sizing: border-box;
  overflow: auto;
  box-shadow: 0 0 0 9999px rgba(0,0,0,.85);
}

.fdv-log-full::before {
  height:44px;
  background:
    linear-gradient(to bottom, rgba(0,0,0,.9), rgba(0,0,0,0));
}

.fdv-log-full [data-auto-log-expand] {
  position: fixed;
  top: 12px;
  left: 16px;
  background: rgba(18,24,34,.92);
  border-color: #444;
  box-shadow: 0 0 0 1px #222, 0 6px 18px rgba(0,0,0,.6);
}

.fdv-modal-footer{ display:flex; gap:8px; align-items:center; justify-content:space-between;
  padding:12px 16px; border-top:1px solid var(--fdv-border); background:rgba(0,0,0,.18) }
.fdv-btn-primary{ background:var(--fdv-primary); color:var(--fdv-primary-fg) }
.fdv-btn-secondary{ background:#1a2233; color:#e6e8eb; border:1px solid #233047 }

.fdv-rpc-text {
  font-size: .85rem;
  color: var(--fdv-muted);
  margin-top: 6px;
  line-height: 1.3;
}

.fdv-volume-start {
  color: var(--fdv-ok);
  font-weight: 600;
}

.fdv-volume-stop {
  color: var(--fdv-err);
  font-weight: 600;
}

/* Price formatting: integer + fractional parts, fits in tight boxes */
.price {
  display: inline-flex;
  align-items: baseline;
  gap: 0.1em;
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
}
.price .int { font-weight: 700; }
.price .dot { opacity: .9; }
.price .frac {
  display: inline-flex;
  align-items: baseline;
  font-size: .9em;
  opacity: .9;
  max-width: 10ch;
  overflow: hidden;
  text-overflow: ellipsis;
}
.price .lead0 { opacity: .75; }
.price .zrun { opacity: .55; font-size: .85em; margin: 0 .05em; }
.price .sig { font-weight: 600; }
.stats-grid .value .price { max-width: 100%; overflow: hidden; text-overflow: ellipsis; }

@media (max-width: 920px){
  .fdv-modal-body{ grid-template-columns: 1fr; }
}
@media (max-width: 860px){
  .fdv-modal-backdrop.show{ align-items:flex-end }
  .fdv-row{ grid-template-columns: 1fr }
  .fdv-wallet{ order:-1 }
  .fdv-token-grid{ grid-template-columns: repeat(2, minmax(0,1fr)) }
}

/* Tiny price: raise/count badge and label it */
.priceTiny{
  display:inline-flex;
  align-items:baseline;
  gap:.35ch;
  white-space:nowrap;
  font-variant-numeric: tabular-nums;
}
.priceTiny .base{ font-weight:700; }
.priceTiny .sig{ font-weight:700; letter-spacing:.02em; }

/* Lead-zeros count badge */
.priceTiny .count{
  position: relative;
  bottom: -.3em;
  font-size: .75em;
  line-height: 1;
  border-radius: 999px;
  color: var(--neon);
  background: linear-gradient(180deg, color-mix(in srgb, var(--neon) 12%, transparent), transparent);
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--neon) 10%, transparent);
}

.priceTiny .count::after{
  margin-left: .25ch;
  opacity: .85;
  font-weight: 600;
  letter-spacing: .01em;
}

.livePrice__line{
  fill:none;
  stroke: var(--neon, #18eac7);
  stroke-width:2;
  vector-effect:non-scaling-stroke;
  filter: drop-shadow(0 0 8px rgba(24,234,199,.35));
  filter: drop-shadow(0 0 8px color-mix(in srgb, var(--neon,#18eac7) 35%, transparent));
  will-change: stroke-dashoffset;
  transition: stroke-dashoffset .6s ease, d .15s ease;
}
.livePrice__area{
  fill: rgba(24,234,199,.16);
  fill: color-mix(in srgb, var(--neon,#18eac7) 16%, transparent);
  transition: d .15s ease;
}

.fdv-auto-wrap{
  border-bottom: 1px solid var(--edge);
  padding: clamp(12px, 2vw, 20px);
  margin: 14px auto;
  color: var(--fdv-text);
  width: 100%;
  max-width: 1200px;
}

.fdv-auto-head{
  display:flex; align-items:center; justify-content:flex-end; gap:12px;
  margin-bottom: 12px;
}

.fdv-flamebar-slot{
      margin-bottom: 31px;
      margin-top: 14px;
}

/* Flamebar: keep styling GPU-safe (no blur rings / heavy animations) */

.fdv-flamebar-frame{
  position: relative;
  border-radius: 20px;
  padding: 3px;
  --fdv-flame-alpha: .5;
  --fdv-flame-fill: 0%;
  isolation: isolate;
  z-index: 0;

  /* Static orange border */
  background: linear-gradient(
    90deg,
    rgba(255, 132, 0, .92),
    rgba(255, 86, 0, .92)
  );
}

.fdv-flamebar-frame::before{
  content: none;
  position:absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events:none;
  z-index: 0;
  opacity: var(--fdv-flame-alpha);
  transform-origin: 50% 50%;
  will-change: transform;
  background: linear-gradient(
    90deg,
    rgba(255, 76, 0, .75),
    rgba(255, 186, 0, .85),
    rgba(255, 45, 114, .60)
  );
}

.fdv-flamebar-frame::after{
  content: none;
  position:absolute;
  inset: -12px;
  border-radius: inherit;
  pointer-events:none;
  z-index: -1;
  opacity: calc(var(--fdv-flame-alpha) * .85);
  transform-origin: 50% 50%;
  will-change: transform;

  background: linear-gradient(
    90deg,
    rgba(255, 76, 0, .55),
    rgba(255, 186, 0, .60),
    rgba(255, 45, 114, .42)
  );

}

.fdv-flamebar-card{
  border: 1px solid rgba(122,222,255,.16);
  box-shadow: 0 16px 40px rgba(0,0,0,.35), inset 0 0 0 1px rgba(26,255,213,.06);
  overflow: hidden;
  position: relative;
  z-index: 1;
}

/* NOTE: conic-gradient / animated glow intentionally disabled to avoid
   GPU/paint crashes seen in some non-Chrome browsers. */

.fdv-flamebar-inner{ position:relative; z-index:1; }

.fdv-flamebar-top{
  display:flex;
  justify-content: space-between;
  gap: 12px;
  align-items:flex-start;
}

.fdv-flamebar-title{ display:flex; flex-direction:column; gap:6px; }
.fdv-flamebar-badge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  font-weight: 900;
  letter-spacing: .12em;
  font-size: .82rem;
  color: rgba(255,255,255,.92);
  text-shadow: 0 0 18px rgba(255, 92, 0, .22);
}
.fdv-flamebar-sub{ color: var(--muted); font-size: .84rem; }

.fdv-flamebar-subFlame{
  display: inline-block;
  margin-right: 6px;
  transform-origin: 50% 70%;
  filter: drop-shadow(0 0 10px rgba(255, 92, 0, .28));
}

@keyframes fdv-flamebar-emojiFlicker{
  0%{ transform: translateY(0) rotate(-4deg) scale(1); opacity: .92; }
  35%{ transform: translateY(-0.9px) rotate(3deg) scale(1.06); opacity: 1; }
  70%{ transform: translateY(0.2px) rotate(-2deg) scale(1.02); opacity: .96; }
  100%{ transform: translateY(0) rotate(-4deg) scale(1); opacity: .92; }
}

.fdv-flamebar-card.is-pumping .fdv-flamebar-subFlame{
  animation: fdv-flamebar-emojiFlicker .42s steps(2, end) infinite;
}

.fdv-flamebar-kpi{ text-align:right; }
.fdv-flamebar-pnlLine{
  display:flex;
  justify-content:flex-end;
  align-items:baseline;
  gap: 8px;
}
.fdv-flamebar-pnl{
  display:block;
  font-weight: 900;
  font-size: clamp(20px, 2.1vw, 28px);
  letter-spacing: .01em;
  color: #ffd166;
}

.fdv-flamebar-pnlExact{
  display:inline-block;
  font-size: .82rem;
  font-weight: 800;
  letter-spacing: .01em;
  color: rgba(157,176,198,.92);
}
.fdv-flamebar-pnlExact.is-pos{ color: color-mix(in srgb, var(--good) 70%, #ffd166); }
.fdv-flamebar-pnlExact.is-neg{ color: rgba(255, 110, 110, .95); }

@keyframes fdv-flamebar-hotShift{
  0%{ background-position: 0% 50%; }
  100%{ background-position: 200% 50%; }
}

@keyframes fdv-flamebar-hotFlicker{
  0%{ transform: translateY(0); opacity: 1; }
  50%{ transform: translateY(-0.4px); opacity: .92; }
  100%{ transform: translateY(0); opacity: 1; }
}

.fdv-flamebar-pnl.is-hot{
  background: linear-gradient(90deg,
    rgba(255, 76, 0, 1),
    rgba(255, 215, 64, 1),
    rgba(255, 45, 114, 1),
    rgba(255, 215, 64, 1)
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 0 14px rgba(255, 92, 0, .18);
  will-change: background-position, transform, opacity;
  animation: fdv-flamebar-hotShift 1.15s linear infinite, fdv-flamebar-hotFlicker .22s steps(2, end) infinite;
}

@media (prefers-reduced-motion: reduce){
  .fdv-flamebar-pnl.is-hot{ animation: none; }
  .fdv-flamebar-card.is-pumping .fdv-flamebar-subFlame{ animation: none; }
}

@supports (color: color-mix(in srgb, white 50%, black)){
  .fdv-flamebar-pnl{ color: color-mix(in srgb, var(--good) 70%, #ffd166); }
}
.fdv-flamebar-meta{ display:block; margin-top: 4px; color: rgba(157,176,198,.9); font-size: .82rem; }

.fdv-flamebar-coin{
  display:flex;
  align-items:center;
  gap: 12px;
  margin-top: 10px;
}

.fdv-flamebar-logo{
  width: 44px; height: 44px;
  border-radius: 12px;
  overflow:hidden;
  border: 1px solid rgba(122,222,255,.22);
  background: rgba(11,17,29,.75);
  position: relative;
}
.fdv-flamebar-logo img{ width:100%; height:100%; object-fit:cover; }

@keyframes fdv-flamebar-spin{ to { transform: rotate(360deg); } }

.fdv-flamebar-logoSpin{
  position: absolute;
  inset: 0;
  display: none;
  place-items: center;
  pointer-events: none;
}

/* Ensure the spinner disappears when JS sets `hidden`. */
.fdv-flamebar-logoSpin[hidden]{ display: none !important; }

/* Show spinner only while the flamebar is in loading state. */
.fdv-flamebar-card.is-loading .fdv-flamebar-logoSpin{ display: grid; }

.fdv-flamebar-logoSpin::before{
  content: "";
  width: 18px;
  height: 18px;
  border-radius: 999px;
  border: 2px solid rgba(184,205,230,.28);
  border-top-color: rgba(255, 92, 0, .95);
  border-right-color: rgba(255, 215, 64, .85);
  animation: fdv-flamebar-spin .75s linear infinite;
}

@media (prefers-reduced-motion: reduce){
  .fdv-flamebar-logoSpin::before{ animation: none; }
}

.fdv-flamebar-cointext{ flex: 1; min-width: 0; }
.fdv-flamebar-sym{ font-weight: 800; font-size: 1.08rem; line-height: 1.1; }
.fdv-flamebar-name{ color: var(--muted); font-size: .90rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.fdv-flamebar-mint{ color: rgba(157,176,198,.9); font-size: .82rem; margin-top: 2px; text-decoration: none; cursor: pointer; display: inline-block; }
.fdv-flamebar-mint:hover{ color: rgba(184,205,230,.95); text-decoration: underline; }

.fdv-flamebar-hodl{
  font-weight: 950;
  letter-spacing: .06em;
  padding: 14px 16px;
  border-radius: 14px;
  box-shadow: inset 0 0 0 1px rgba(255, 92, 0, .18), 0 10px 26px rgba(0,0,0,.35);
}
.fdv-flamebar-hodl:hover{ filter: brightness(1.12); }

.fdv-flamebar-bar{
  margin-top: 12px;
  height: 12px;
  border-radius: 999px;
  background: rgba(122,222,255,.08);
  border: 1px solid rgba(122,222,255,.16);
  overflow:hidden;
}

.fdv-flamebar-fill{
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg,
    rgba(255, 45, 114, .55),
    rgba(255, 92, 0, .75),
    rgba(255, 215, 64, .75),
    rgba(26,255,213,.35)
  );
  position:relative;
  transition: width .35s ease;
}

.fdv-flamebar-fill::after{ content:none; }

.fdv-title{
  margin:0; font-weight:600;
  font-size: clamp(16px, 1.6vw, 20px);
  line-height: 1.2;
  letter-spacing: 0.2px;
}

/* Grid */
.fdv-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(min(170px, 50%), 1fr));
  gap: clamp(10px, 1.6vw, 14px);
  margin-bottom: 12px;
}
@media (max-width: 520px){
  .fdv-grid{ grid-template-columns: 1fr; }
}
.fdv-grid label{
  display:flex; flex-direction:column; gap:6px;
  font-size: .88rem; color: var(--fdv-muted);
}
.fdv-grid > div{ display:flex; flex-wrap:wrap; gap: 8px; }

/* Inputs */
.fdv-grid input{
  background: #000;
  border: 1px solid var(--fdv-border);
  border-radius: 10px;
  padding: 10px 12px;
  color: var(--fdv-text);
  font-size: .95rem;
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
  width: 100%;
}
.fdv-grid input::placeholder{ color: color-mix(in srgb, var(--fdv-muted) 70%, transparent); }
.fdv-grid input:hover{
  border-color: color-mix(in srgb, var(--fdv-text) 18%, var(--fdv-border));
}
.fdv-grid input:focus-visible{
  border-color: var(--fdv-primary);
  box-shadow: 0 0 0 3px var(--fdv-focus);
}
.fdv-grid input:disabled{
  opacity:.7; cursor:not-allowed; filter: grayscale(.1);
}
/* Improve number inputs cross-browser */
.fdv-grid input[type=number]{ -moz-appearance: textfield; }
.fdv-grid input[type=number]::-webkit-outer-spin-button,
.fdv-grid input[type=number]::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }

/* Buttons */
.fdv-actions{ display:flex; flex-wrap:wrap; justify-content:space-between; gap:10px; margin-top: 10px; margin-bottom:10px; }
.fdv-actions button, .fdv-grid button{
  background: transparent;
  border: 1px solid var(--fdv-border);
  color: var(--fdv-text);
  padding: 10px 14px;
  border-radius: 10px;
  cursor: pointer;
  font-size: .95rem;
  min-height: 40px;
  transition: transform .08s ease, background-color .15s ease, border-color .15s ease, box-shadow .15s ease;
  user-select: none;
}

/* Tool button row (Auto Trader) */
.fdv-tool-row{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content: flex-end;
  gap: clamp(6px, 1.4vw, 10px);
  padding-bottom: 8px;
  margin-bottom: 8px;
  position: relative;
}
.fdv-tool-row .btn.tool-btn{
  padding: 9px 10px;
  border-radius: 10px;
  font-size: clamp(.82rem, 1.6vw, .92rem);
  min-height: 38px;
}

/* Utilities (used by widgets) */
.fdv-hidden{ 
  display:none !important;
  height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  border: 0 !important;
  overflow: hidden !important;
}
.fdv-mutedline{ opacity: .7; }

/* Auto Trader: Advanced panel helpers */
.fdv-advanced{ margin: 8px 0; }
.fdv-advanced-summary{ cursor:pointer; user-select:none; margin-bottom: 25px; }
.fdv-advanced-grid{ margin-top: 8px; }

/* Auto Trader: Agent Gary config */
.fdv-agent-bar{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(min(160px, 100%), 1fr));
  gap: clamp(10px, 1.6vw, 14px);
  align-items: end;
  padding-top: 8px;
  margin-top: 8px;
  margin-bottom: 30px;
  border-top: 1px solid var(--fdv-border);
}
.fdv-agent-item{ display:flex; flex-direction:column; gap: 6px; align-items:stretch; min-width: 0; }
.fdv-agent-toggle{ align-items:flex-start; gap: 6px; }
.fdv-agent-state{ opacity: .85; }
.fdv-agent-key input[type="password"],
.fdv-agent-model select{ width: 100%; min-width: 0; }

.fdv-agent-bar strong{ color: var(--fdv-text); }
.fdv-agent-bar label{ font-size: .88rem; color: var(--fdv-muted); }

/* Keep Agent Gary inputs/selects consistent with .fdv-grid inputs */
.fdv-agent-bar input[type="password"],
.fdv-agent-bar select{
  width: 100%;
  background: color-mix(in srgb, var(--bg) 88%, transparent);
  border: 1px solid var(--fdv-border);
  border-radius: 10px;
  padding: 10px 12px;
  color: var(--fdv-text);
  font-size: .95rem;
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
}
.fdv-agent-bar input[type="password"]:focus-visible,
.fdv-agent-bar select:focus-visible{
  border-color: var(--fdv-primary);
  box-shadow: 0 0 0 3px var(--fdv-focus);
}

/* Auto Trader: Hold time slider */
.fdv-hold-time-slider{ margin-top: 6px; }
.fdv-holdtime-row{ display:flex; align-items:center; gap: 10px; padding: 6px 0; }
.fdv-holdtime-label{ width: 110px; }
.fdv-holdtime-range{ width: 100%; accent-color: var(--fdv-primary); }
.fdv-holdtime-val{ width: 56px; text-align:right; }
.fdv-holdtime-dyn{ display:flex; align-items:center; gap: 6px; margin-left: 8px; white-space: nowrap; }
.fdv-holdtime-infty{ opacity: .9; }

@media (max-width: 520px){
  .fdv-agent-bar{ gap: 8px; }
  .fdv-holdtime-label{ width: auto; }
  .fdv-holdtime-val{ width: auto; }
  .fdv-holdtime-dyn{ margin-left: 0; }
}

@media (max-width: 520px){
  .fdv-tool-row .btn.tool-btn{ flex: 1 1 calc(50% - 6px); }
}

@media (max-width: 360px){
  .fdv-tool-row .btn.tool-btn{ flex-basis: 100%; }
}

.fdv-actions button:hover, .fdv-grid button:hover{ border-color: color-mix(in srgb, var(--fdv-text) 18%, var(--fdv-border)); }
.fdv-actions button:active, .fdv-grid button:active{ transform: translateY(1px); }
.fdv-actions button:disabled, .fdv-grid button:disabled{ opacity:.6; cursor:not-allowed; }

/* Semantic button variants by data-attr */
button[data-auto-start]{ background: linear-gradient(180deg, #2b90ff, #1c7ae6); border-color: #1a5fbf; }
button[data-auto-start]:hover{ box-shadow: 0 4px 16px rgba(43,144,255,.35); }
button[data-auto-stop]{ background: linear-gradient(180deg, var(--fdv-danger), var(--fdv-danger-700)); border-color: #8c1f24; }
button[data-auto-stop]:hover{ box-shadow: 0 4px 16px rgba(255,77,79,.35); }
button[data-auto-unwind]{ color:#fff; }

/* Toggle switch */
.fdv-switch{ display:flex; align-items:center; gap:10px; }
.fdv-switch input[type="checkbox"]{
  inline-size: 0; block-size: 0; opacity: 0; pointer-events: none;
}
.fdv-switch span{
  position: relative; display:inline-flex; align-items:center; gap:8px;
  font-size:.95rem; color: var(--fdv-muted);
  padding-left: 54px; min-height: 28px; cursor: pointer;
}
.fdv-switch span::before{
  content:""; position:absolute; left:0; top:50%; transform:translateY(-50%);
  width: 46px; height: 26px; border-radius: 999px;
  background: #0f1926; border:1px solid var(--fdv-border);
  transition: background-color .15s ease, border-color .15s ease;
}
.fdv-switch span::after{
  content:""; position:absolute; left:2px; top:50%; transform:translateY(-50%);
  width: 22px; height: 22px; border-radius: 50%;
  background: #e6f0ff; box-shadow: 0 2px 6px rgba(0,0,0,.35);
  transition: transform .15s ease, background-color .15s ease;
}
.fdv-switch input:checked + span::before{ background: var(--fdv-primary); border-color: var(--fdv-primary-700); }
.fdv-switch input:checked + span::after{ transform: translate(20px, -50%); background: #fff; }

/* Head/actions wrap on small screens */
@media (max-width: 740px){
  .fdv-auto-head{ justify-content:space-between; gap:10px; }
  .fdv-actions button{ padding: 10px 5px; flex:1; }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  * { animation: none !important; transition: none !important; }
}

/* Collapsible Auto UI */
details.fdv-auto-wrap { overflow: hidden; }
.fdv-auto-wrap > summary {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: clamp(10px, 2vw, 14px);
  flex-wrap: wrap;
  list-style:none; cursor:pointer; user-select:none;
  padding: 12px 14px;
}
.fdv-auto-wrap > summary::-webkit-details-marker { display:none; }
.fdv-acc-title { display:flex; align-items:center; gap:10px; min-width: 0; }
.fdv-acc-title > * { min-width: 0; }
.fdv-acc-caret { transition: transform .15s ease; transform: rotate(-90deg); opacity:.85; }
.fdv-auto-wrap[open] .fdv-acc-caret { transform: rotate(0deg); }
.fdv-auto-body { padding: 12px; border-top: 1px solid var(--fdv-border); }
.fdv-auto-body hr {
  color: var(--good);
}
/* Tighter on very small screens */
@media (max-width:520px){
  .fdv-auto-wrap > summary{ padding: 10px 12px; }
  .fdv-auto-body{ padding: 10px; }
}

/* Touch devices: keep targets comfortable */
@media (pointer: coarse){
  .fdv-actions button, .fdv-grid button{ min-height: 44px; }
  .fdv-grid input{ padding: 12px 12px; }
  .fdv-tool-row .btn.tool-btn{ min-height: 44px; padding: 10px 12px; }
}

@supports ((-webkit-backdrop-filter: blur(8px)) or (backdrop-filter: blur(8px))){
  .fdv-auto-wrap{
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
  }
  .fdv-grid input{
    -webkit-backdrop-filter: blur(6px);
    backdrop-filter: blur(6px);
  }
}

/* Library */
.fdv-lib-btn {
  display: inline-flex; align-items: center; justify-content: flex-end; gap: 8px;margin-bottom: 15px;
  height: 36px; padding: 0 10px; border-radius: 10px;
  background: transparent; border: none; font-weight: 700;
  cursor: pointer; transition: filter .15s ease, border-color .15s ease, background .15s ease;
}
.fdv-lib-btn:hover { filter: brightness(1.06); }
.fdv-lib-heart { display:inline-block; font-size:16px; line-height:1; }
.fdv-lib-count {
  min-width:20px; height:20px; padding:0 6px; display:inline-flex; align-items:center; justify-content:center;
  font-size:12px; font-weight:800; color: var(--text);
}
/* Modal */
.fdv-lib-backdrop { position: fixed; inset: 0; z-index: 9998; display:none; background: rgba(0,0,0,.45); backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px); }
.fdv-lib-backdrop.show { display:block; }
.fdv-lib-modal { position: fixed; z-index: 9999; inset: 8% 50% auto 50%; transform: translate(-50%, 0); width: min(960px, 94vw);
  max-height: 80vh; overflow: hidden; border-radius: 14px; background: linear-gradient(180deg, rgba(15,22,37,.96), rgba(15,22,37,.90));
  border: 1px solid rgba(122,222,255,.16); box-shadow: 0 24px 64px rgba(0,0,0,.55), inset 0 0 0 1px rgba(26,255,213,.05);
  color: var(--text); display: grid; grid-template-rows: auto 1fr auto; }
.fdv-lib-header { display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px; border-bottom:1px solid rgba(122,222,255,.10); }
.fdv-lib-title { font-size:16px; font-weight:800; }
.fdv-lib-close { background:none; border:none; color:var(--text); font-size:22px; line-height:1; cursor:pointer; }
.fdv-lib-tabs { display:flex; gap:6px; padding:10px 12px; }
.fdv-lib-tab { padding:8px 12px; border-radius:10px; cursor:pointer; border:1px solid rgba(122,222,255,.12); background: rgba(255,255,255,.05); font-weight:700; }
.fdv-lib-tab[aria-selected="true"] { border-color: rgba(26,255,213,.40); box-shadow: inset 0 0 0 1px rgba(26,255,213,.16); }
.fdv-lib-body { padding:10px 12px 14px; overflow:auto; }
.fdv-lib-footer { display:flex; justify-content:flex-end; gap:8px; padding:10px 12px; border-top:1px solid rgba(122,222,255,.10); background: linear-gradient(180deg, rgba(0,0,0,.00), rgba(0,0,0,.10)); }
/* Grid */
.fdv-lib-grid { display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap:10px; }
@media (max-width: 900px){ .fdv-lib-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 560px){ .fdv-lib-grid { grid-template-columns: 1fr; } }
.fdv-lib-card { display:flex; gap:10px; align-items:flex-start; padding:10px; border-radius:12px; background: linear-gradient(180deg, rgba(14,16,27,.95), rgba(0,0,0,.80)); border:1px solid rgba(122,222,255,.12); }
.fdv-lib-card.fdv-lib-exit { animation: fdv-lib-exit .16s ease forwards; pointer-events:none; }
@keyframes fdv-lib-exit {
  from { opacity: 1; transform: none; max-height: 200px; margin: 0; }
  to { opacity: 0; transform: translateY(6px) scale(.985); max-height: 0px; margin: 0; }
}
@media (prefers-reduced-motion: reduce){
  .fdv-lib-card.fdv-lib-exit { animation: none; opacity: 0; }
}
.fdv-lib-logo { width:36px; height:36px; border-radius:10px; object-fit:cover; background:#0b111d; border:1px solid rgba(122,222,255,.20); }
.fdv-lib-main { min-width:0; flex:1; display:flex; flex-direction:column; gap:6px; }
.fdv-lib-line1 { display:flex; align-items:center; gap:8px; min-width:0; }
.fdv-lib-sym { font-weight:800; }
.fdv-lib-name { color:var(--muted); font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.fdv-lib-actions { display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.fdv-pill { display:inline-flex; align-items:center; gap:6px; padding:3px 8px; border-radius:999px; background: rgba(148,163,184,.10); border:1px solid rgba(122,222,255,.14); font-size:12px; }
.fdv-pill.link { cursor:pointer; background: rgba(123,241,255,.06); border-color: rgba(122,222,255,.22); color: var(--muted); }
.fdv-lib-table { width:100%; border-collapse:collapse; }
.fdv-lib-table th, .fdv-lib-table td { padding:8px; text-align:left; border-bottom:1px solid rgba(122,222,255,.10); overflow:scroll; }
.fdv-up { color:#19c37d; } .fdv-down { color:#ff6f6f; }

/* Search */

.fdv-search-wrap{position:fixed;inset:0;display:none;z-index:9999;background: rgba(0, 0, 0, 1);}
.fdv-search-wrap.open{display:block}
.fdv-search-panel{position:absolute;left:50%;top:10%;transform:translateX(-50%);
  width:min(920px,96vw);background:#0b0e12;border:1px solid #1b2026;border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.4);padding:14px}
.fdv-search-head{display:flex;align-items:center;gap:10px}
.fdv-search-input{flex:1;background:#0f141a;border:1px solid #2a2f36;color:#e6ecf0;
  border-radius:10px;padding:10px 12px;font-size:15px}
.fdv-search-close{flex:0 0 auto;background:#1b2026;border:1px solid #2a2f36;color:#9aa7b2;
  border-radius:8px;padding:8px 10px;cursor:pointer}
.fdv-search-results{margin-top:10px;max-height:min(54vh,500px);overflow:auto;border:1px solid #1b2026;
  border-radius:10px;background:#0f141a}
.fdv-search-results .row{display:flex;gap:10px;padding:10px 12px;color:#cfd9e3;text-decoration:none;border-bottom:1px solid #151b22}
.fdv-search-results .row:last-child{border-bottom:none}
.fdv-search-results .row.is-active{background:#17202a}
.fdv-search-results .empty{padding:12px;color:#8b98a5}

/* Favboard */
.favboard-wrap{background:var(--fdv-surface,#090d12);border:1px solid var(--fdv-border,#141b24);border-radius:16px;padding:18px;margin:0 auto;box-shadow:var(--shadow-2,0 12px 32px rgba(0,0,0,.35));}
.favboard-head{display:flex;flex-wrap:wrap;gap:var(--gap-2,12px);align-items:center;justify-content:space-between;margin-bottom:16px;}
.favboard-title{font-size:var(--step-1,1.25rem);font-weight:600;color:var(--text,#e8f2ff);}
.favboard-refresh{background:var(--fdv-bg,#0f1621);border:1px solid color-mix(in srgb,var(--accent2,#7bf1ff) 15%,transparent);color:var(--fdv-muted,#9ab7d2);padding:8px 14px;border-radius:10px;cursor:pointer;transition:.2s;}
.favboard-refresh:hover{border-color:var(--accent2,#7bf1ff);color:var(--text,#d8ecff);}
.favboard-status{font-size:.85rem;color:var(--fdv-muted,#6f859c);}
.favboard-table{width:100%;border-collapse:collapse;margin-top:6px;min-width:640px;}
.favboard-table thead{background:linear-gradient(90deg,color-mix(in srgb,var(--accent2,#7bf1ff) 20%,transparent),color-mix(in srgb,var(--accent,#1affd5) 14%,transparent));}
.favboard-table th{font-weight:600;text-align:left;font-size:.78rem;color:var(--fdv-muted,#a7c5e2);padding:10px 12px;border-bottom:1px solid var(--fdv-border,#172231);text-transform:uppercase;letter-spacing:.05em;}
.favboard-table td{padding:11px 12px;border-bottom:1px solid color-mix(in srgb,var(--fdv-border,#0f1721) 90%,transparent);font-size:.88rem;color:var(--text,#d8e7fb);vertical-align:middle;}
.favboard-table tr:last-child td{border-bottom:none;}
.favboard-rank{font-weight:600;color:var(--accent2,#8fd0ff);}
.favboard-logo{width:36px;height:36px;border-radius:11px;object-fit:cover;border:1px solid color-mix(in srgb,var(--accent2,#1a2838) 35%,transparent);background:var(--fdv-bg,#0e1620);margin-right:10px;vertical-align:middle;}
.favboard-name{display:flex;align-items:center;}
.favboard-name strong{color:var(--text,#edf5ff);font-size:.92rem;}
.favboard-symbol{color:var(--fdv-muted,#7fa0c2);font-size:.78rem;margin-left:8px;text-transform:uppercase;letter-spacing:.03em;}
.favboard-mint{font-family:var(--mono-font,"JetBrains Mono",monospace);font-size:.75rem;color:color-mix(in srgb,var(--fdv-muted,#7a92ac) 85%,transparent);word-break:break-all;}
.favboard-pill{padding:4px 8px;border-radius:999px;background:color-mix(in srgb,var(--accent2,#101b28) 12%,transparent);border:1px solid color-mix(in srgb,var(--accent2,#1f2d3f) 25%,transparent);font-size:.78rem;color:var(--accent2,#9ed9ff);display:inline-block;}
.favboard-pill.positive{background:color-mix(in srgb,var(--ok,#1aff7a) 12%,transparent);border-color:color-mix(in srgb,var(--ok,#1aff7a) 32%,transparent);color:var(--ok,#95f5b7);}
.favboard-pill.negative{background:color-mix(in srgb,var(--danger,#ff4d6d) 12%,transparent);border-color:color-mix(in srgb,var(--danger,#ff4d6d) 32%,transparent);color:var(--danger,#ffb8a6);}
.favboard-link{color:var(--accent2,#8fd0ff);text-decoration:none;}
.favboard-link:hover{text-decoration:underline;}
.favboard-empty{padding:24px;text-align:center;color:var(--fdv-muted,#6f859c);font-size:.9rem;}
.favboard-panel{position:relative;display:none; width:100%;}
.favboard-panel[data-open="1"]{display:block;}
.favboard-panel .favboard-panel-box{background:var(--fdv-bg,#070c11);border:1px solid var(--fdv-border,#162231);border-radius:18px;padding:18px;margin-top:14px;width:100%;box-shadow:var(--shadow-3,0 12px 32px rgba(0,0,0,.6));}
.favboard-panel-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;}
.favboard-panel-header h3{margin:0;font-size:1.1rem;color:var(--text,#e8f2ff);}
.favboard-close{background:var(--fdv-bg,#0f1621);border:1px solid color-mix(in srgb,var(--accent2,#1e2a3a) 25%,transparent);color:var(--fdv-muted,#9ab7d2);padding:6px 10px;border-radius:10px;cursor:pointer;transition:.2s;}
.favboard-close:hover{border-color:var(--accent2,#2ac3ff);color:var(--text,#d8ecff);}
.favboard-scroll{overflow-x:auto;}
@media (max-width:720px){
  .favboard-wrap{padding:14px;}
  .favboard-head{flex-direction:column;align-items:flex-start;}
  .favboard-scroll{overflow:visible;}
  .favboard-table{border-collapse:separate;border-spacing:0 10px;min-width:0;}
  .favboard-table thead{display:none;}
  .favboard-table tbody{display:block;}
  .favboard-table tr{display:block;background:color-mix(in srgb,var(--fdv-bg,#0b1119) 92%,transparent);border:1px solid color-mix(in srgb,var(--fdv-border,#162231) 75%,transparent);border-radius:14px;padding:12px 12px 6px;margin-bottom:25px;box-shadow:var(--shadow-1,0 8px 18px rgba(0,0,0,.28));}
  .favboard-table td{display:flex;justify-content:space-between;align-items:center;border-bottom:none;padding:6px 0;font-size:.82rem;}
  .favboard-table td::before{content:attr(data-label);flex:0 0 42%;max-width:48%;color:var(--fdv-muted,#6f859c);text-transform:uppercase;letter-spacing:.06em;font-size:.72rem;}
  .favboard-name{flex-direction:row;align-items:center;}
  .favboard-table td[data-label="Token"]{padding-top:0;}
  .favboard-table td[data-label="Link"]{justify-content:space-between;padding-bottom:2px;}
  .favboard-table td + td{border-top:1px solid rgba(255,255,255,.04);}
}